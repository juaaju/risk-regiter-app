2025-05-05 14:13:51,168 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:13:51,169 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:13:51,169 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:13:51,169 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:13:51,170 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:13:51,189 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:13:51,189 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75aa1fea4ad0>
2025-05-05 14:13:51,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:13:51,190 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:13:51,190 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:13:51,190 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:13:51,190 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:13:51,192 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'GnlMU8AS6Xyw0ueGnVyBx9KLrX0=')])
2025-05-05 14:13:51,192 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:13:51,192 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:13:51,193 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:13:51,194 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:13:51,194 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:13:51,195 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:13:51,196 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:13:51,196 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,196 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:13:51,196 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:13:51,197 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:13:51,216 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:13:51,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75aa1feeb560>
2025-05-05 14:13:51,218 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:13:51,218 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:13:51,219 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:13:51,219 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:13:51,219 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:13:51,219 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'jfNU9eY5xY7YwkpySjCGSCSXGK4=')])
2025-05-05 14:13:51,220 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:13:51,220 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,221 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,222 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,222 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,226 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:13:51,226 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:13:51,236 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:15:33,982 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:15:33,982 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:15:33,983 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:15:34,004 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:15:34,005 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:15:34,005 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:15:34,014 - rag-chatbot - ERROR - Error membuat koneksi psycopg2: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"
connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"

2025-05-05 14:15:34,015 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 96, in get_psycopg2_connection
    conn = psycopg2.connect(
           ^^^^^^^^^^^^^^^^^
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"
connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"


2025-05-05 14:15:34,015 - rag-chatbot - ERROR - Error saat memproses kueri chat: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"
connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"

2025-05-05 14:15:34,015 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 249, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 114, in search_similar_chunks
    conn = get_psycopg2_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 96, in get_psycopg2_connection
    conn = psycopg2.connect(
           ^^^^^^^^^^^^^^^^^
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"
connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  password authentication failed for user "postgres"


2025-05-05 14:16:11,172 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:11,173 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:11,173 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:16:11,173 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:16:11,173 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:11,173 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:11,173 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:11,173 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:11,174 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:16:11,174 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:16:11,174 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:11,174 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,341 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:16:12,342 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,342 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:16:12,342 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:16:12,343 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:16:12,361 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:16:12,362 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x745c99b1c8c0>
2025-05-05 14:16:12,362 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:16:12,362 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:16:12,363 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:16:12,363 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:16:12,363 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:16:12,363 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'7Yb6OCMcQRs0wlfu72S2+lP+cX0=')])
2025-05-05 14:16:12,364 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:16:12,365 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,366 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,366 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,366 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:12,368 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:16:12,368 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:16:12,369 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,369 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:16:12,369 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:16:12,370 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:16:12,386 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:16:12,387 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x745c99b63500>
2025-05-05 14:16:12,387 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:16:12,387 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:16:12,387 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:16:12,387 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:16:12,387 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:16:12,390 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'E4J1DkOP/9kFaVNE1UN92EuVe0A=')])
2025-05-05 14:16:12,391 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:16:12,391 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,392 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,392 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,392 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,395 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:16:12,395 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:16:12,406 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:16:21,130 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:16:21,130 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:16:21,131 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:21,160 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:16:21,160 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:16:21,160 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:16:21,165 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:16:21,165 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:16:21,166 - rag-chatbot - ERROR - Error saat pencarian chunks: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:16:21,167 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:16:21,167 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:16:21,167 - rag-chatbot - ERROR - Error saat memproses kueri chat: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:16:21,167 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 249, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:18:34,431 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:34,431 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:34,431 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:18:34,431 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:18:34,432 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:34,432 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:34,432 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:34,432 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:34,432 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:18:34,432 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:18:34,433 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:34,433 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,006 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:18:36,007 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,015 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:18:36,016 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:18:36,017 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:18:36,037 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:18:36,038 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x742909990bc0>
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:18:36,038 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'Nvmqk+Ptf48srm9IPPje4Q7INCA=')])
2025-05-05 14:18:36,039 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:18:36,039 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,040 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,041 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,041 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:36,042 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:18:36,042 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:18:36,042 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,042 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:18:36,043 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:18:36,043 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:18:36,061 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:18:36,062 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7429099cb350>
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:18:36,062 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'8KXZELVS6Pj/osYkwdqWb2C4oVc=')])
2025-05-05 14:18:36,062 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:18:36,063 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,063 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,063 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,063 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,065 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:18:36,065 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:18:36,078 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:18:45,022 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:18:45,022 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:18:45,024 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:45,048 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:18:45,049 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:18:45,049 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:18:45,054 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:18:45,054 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:18:45,055 - rag-chatbot - ERROR - Error saat pencarian chunks: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:18:45,055 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:18:45,055 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:18:45,055 - rag-chatbot - ERROR - Error saat memproses kueri chat: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:18:45,056 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 249, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:23:50,965 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:23:50,966 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:23:50,966 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:23:50,973 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:23:50,973 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:23:50,973 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:23:50,979 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:23:50,979 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:23:50,981 - rag-chatbot - ERROR - Error saat pencarian chunks: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:23:50,981 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:23:50,982 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:23:50,982 - rag-chatbot - ERROR - Error saat memproses kueri chat: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:23:50,982 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 249, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 129, in search_similar_chunks
    cursor.execute(
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function search_similar_chunks(numeric[], numeric, integer) does not exist
LINE 2:                 SELECT * FROM search_similar_chunks(ARRAY[0....
                                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:26:33,253 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:33,253 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:33,254 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:26:33,254 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:26:33,254 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:33,254 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:33,254 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:33,254 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:33,255 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:26:33,255 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:26:33,255 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:33,255 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,420 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:26:34,421 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,421 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:26:34,421 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:26:34,422 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:26:34,442 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:26:34,442 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x717ffbff3020>
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:26:34,443 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'w6W0102XacnwVZe7rAUJEVQ/gxM=')])
2025-05-05 14:26:34,443 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:26:34,443 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,444 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,445 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,445 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:34,447 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:26:34,447 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:26:34,447 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,447 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:26:34,448 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:26:34,448 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:26:34,466 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:26:34,467 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x717ffbb5f470>
2025-05-05 14:26:34,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:26:34,468 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:26:34,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:26:34,468 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:26:34,468 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:26:34,468 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'GM+cnXN6TbixhcohTKS26qhaHLU=')])
2025-05-05 14:26:34,468 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:26:34,468 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,469 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,469 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,469 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,470 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:26:34,470 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:26:34,482 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:26:41,251 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:26:41,251 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:26:41,252 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:41,274 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:26:41,274 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:26:41,274 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:26:41,281 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:26:41,281 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:26:41,285 - rag-chatbot - ERROR - Error saat pencarian chunks: operator does not exist: vector <=> numeric[]
LINE 8:                 1 - (dc.embedding <=> ARRAY[0.02723246812820...
                                          ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:26:41,285 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 161, in search_similar_chunks
    cursor.execute(query, (query_embedding, query_embedding, similarity_threshold, query_embedding, max_chunks))
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: operator does not exist: vector <=> numeric[]
LINE 8:                 1 - (dc.embedding <=> ARRAY[0.02723246812820...
                                          ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:26:41,285 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:26:41,285 - rag-chatbot - ERROR - Error saat memproses kueri chat: operator does not exist: vector <=> numeric[]
LINE 8:                 1 - (dc.embedding <=> ARRAY[0.02723246812820...
                                          ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

2025-05-05 14:26:41,285 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 276, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 161, in search_similar_chunks
    cursor.execute(query, (query_embedding, query_embedding, similarity_threshold, query_embedding, max_chunks))
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: operator does not exist: vector <=> numeric[]
LINE 8:                 1 - (dc.embedding <=> ARRAY[0.02723246812820...
                                          ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.


2025-05-05 14:28:44,994 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:44,994 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:44,995 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:28:44,995 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:28:44,995 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:44,995 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:44,996 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:44,996 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:44,996 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:28:44,996 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:28:44,996 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:44,997 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,410 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:28:46,411 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,411 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:28:46,412 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:28:46,412 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:28:46,446 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:28:46,447 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x74af91780bf0>
2025-05-05 14:28:46,447 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:28:46,448 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:28:46,448 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:28:46,448 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:28:46,448 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:28:46,448 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'TvflM+AqE+C7fTswz6jda7JxI7g=')])
2025-05-05 14:28:46,449 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:28:46,449 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,450 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,450 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,450 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:46,452 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:28:46,452 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:28:46,452 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,452 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:28:46,453 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:28:46,453 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:28:46,468 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:28:46,469 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x74af917bb650>
2025-05-05 14:28:46,469 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:28:46,470 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:28:46,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:28:46,470 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:28:46,470 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:28:46,470 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'CwklXmU4f0ljVId925LODDD+2EQ=')])
2025-05-05 14:28:46,470 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:28:46,470 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,471 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,471 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,471 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,473 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:46,473 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:28:46,483 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:28:51,883 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:28:51,883 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:28:51,885 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:51,907 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:28:51,907 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:28:51,907 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:28:51,913 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:28:51,913 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:28:51,920 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7762023673178301
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7732897400856072
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Hasil: chunk_id=9, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7325446169051769
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Hasil: chunk_id=10, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7174611260020074
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Hasil: chunk_id=4, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6719677839317579
2025-05-05 14:28:51,920 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:28:51,920 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:28:51,922 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\n\nDOCUMENT 2:\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\nDOCUMENT 3:\natau dipermukaan airagar terhindar dari bahaya tenggelam dan atau\nmengatur keterapungan (buoyancy) pengguna agar dapat berada pada\nposisi tenggelam (negative buoyant) atau melayang (neutral buoyant) di\ndalam air.\n\uf0a1Jenis pelampung terdiri dari jaket keselamatan (life jacket), rompi\nkeselamatan (life vest), rompi pengatur keterapungan (Bouyancy Control\nDevice) .\nPASAL 7AYAT 1\n\uf0a1Pengusaha atau Pengurus wajib melaksanakan manajemen APD di\ntempat kerja .\nPASAL 7AYAT 2\n\uf0a1Manajemen APD sebagaimana dimaksud pada ayat (1),meliputi :\n\u25aaIdentifikasi kebutuhan dan syarat APD ;\n\u25aaPemilihan APD yang sesuai dengan jenis bahaya dan kebutuhan/kenyamanan\nPekerja/Buruh ;\n\u25aaPelatihan ;\n\u25aaPenggunaan, perawatan, dan penyimpanan ;\n\u25aaPenatalaksanaan pembuangan atau pemusnahan ;\n\u25aaPembinaan ;\n\u25aaInspeksi ;dan\n\u25aaEvaluasi dan pelaporan .\n\uf0a1Mampu menghindari energi berbahaya pada keadaan\ntertentu\n\uf0a1Bahan yang dipakai berkualitas baik\n\uf0a1Bentuknya sesuai dengan bentuk tubuh\n\uf0a1Dirancang dengan baik dan memiliki penampilan yang\n\nDOCUMENT 4:\nmenarik\n\uf0a1Mudah untuk melakukan pekerjaan\n\uf0a1Mudah untuk dipakai dan menanggalkannya\n\uf0a1Tidak menimbulkan beban pada gerakan tubuh\n\uf0a1Memenuhi standard\n\uf0a1Memiliki sertifikat\n\n\uf0a1Dipilih dan dipakai sesuai dengan kondisi lingkungan, potensi\nbahaya dan waktu pemakaian\n\uf0a1Penggunaan secara benar sesuai dengan pentunjuk\npemakaian\n\uf0a1Tenaga kerja harus dilatih secara berkala baik pemakaian dan\npemeliharaan\n\uf0a1Laporkan apabila ada perubahan pada bagian APD\n\uf0a1Mengisi form logbook terkait dengan penggunaan APD\n\nPemeriksaan APD\n\uf0a1Periksa keberadaan\n\uf0a1Periksa kelengkapan\n\uf0a1Periksa fungsional\n\uf0a1Periksa kebersihan\nPerawatan\n\uf0a1Bersihkan dengan air bersih,\n\uf0a1Hindari penggunaan bahan kimia untuk membersihkan,\n\uf0a1Keringkan sebelum disimpan\nPenyimpanan\n\uf0a1Simpan sesuai dengan kelompoknya\n\uf0a1Jauhkan dari sinar matahari\n\uf0a1Simpan dengan ventilasi yang baik\n\uf0a1Jauhkan dengan peralatan yang mengeluarkan radiasi\n\uf0a1Jauhkan dari bahan kimia \n\nPASAL 8\n1) APD yang rusak, retak atau tidak dapat berfungsi dengan baik\n\nDOCUMENT 5:\n\uf0a1Dilakukan pekerjaan yang mengandung bahaya tertimbun tanah, kejatuhan,\nterkena pelantingan benda, terjatuh atau terperosok, hanyut atau terpelanting ;\n\uf0a1Dilakukan pekerjaan dalam ruang terbatas tangki, sumur atau lubang ;\n\uf0a1Terdapat atau menyebar suhu, kelembaban, debu, kotoran, api, asap, gas,\nhembusan angin, cuaca, sinar atau radiasi, suara atau getaran ;\n\uf0a1Alat pelindung dirimeliputi :\n\u25aaPelindung kepala,\n\u25aaPelindung mata dan muka,\n\u25aaPelindung telinga,\n\u25aaPelindung pernapasan beserta perlengkapannya,\n\u25aaPelindung tangan,\n\u25aaPelindung kaki.\n\uf0a1Yang termasuk APD,\n\u25aaPakaian pelindung,\n\u25aaAlat pelindung jatuh perorangan,\n\u25aaPelampung .\n\uf0a1Pakaian pelindung berfungsi untuk melindungi\nbadan sebagian atau seluruh bagian badan dari\nbahaya temperatur panas atau dingin yang\nekstrim, pajanan api dan benda -benda panas,\npercikan bahan -bahan kimia, cairan dan logam\npanas ,uap panas, benturan (impact) dengan\nmesin, peralatan dan bahan, tergores ,radiasi,\nbinatang, mikro -organisme patogen dari\n\nPERTANYAAN: berikan saya dokumen tentang APD\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:28:54,445 - rag-chatbot - INFO - Menyimpan riwayat kueri: 'berikan saya dokumen tentang APD'
2025-05-05 14:28:54,445 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:28:54,450 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:28:54,452 - rag-chatbot - ERROR - Error saat menyimpan riwayat kueri: expected 1536 dimensions, not 768

2025-05-05 14:28:54,452 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 200, in save_query_history
    cursor.execute(
psycopg2.errors.DataException: expected 1536 dimensions, not 768


2025-05-05 14:28:54,452 - rag-chatbot - ERROR - Error saat memproses kueri chat: expected 1536 dimensions, not 768

2025-05-05 14:28:54,452 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 316, in chat
    query_id = save_query_history(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 200, in save_query_history
    cursor.execute(
psycopg2.errors.DataException: expected 1536 dimensions, not 768


2025-05-05 14:30:13,614 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:30:13,614 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:30:13,614 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:30:13,641 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:30:13,641 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:30:13,641 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:13,646 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:13,646 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:30:13,650 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7762023673178301
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7732897400856072
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Hasil: chunk_id=9, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7325446169051769
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Hasil: chunk_id=10, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7174611260020074
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Hasil: chunk_id=4, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6719677839317579
2025-05-05 14:30:13,650 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:30:13,650 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:30:13,650 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\n\nDOCUMENT 2:\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\nDOCUMENT 3:\natau dipermukaan airagar terhindar dari bahaya tenggelam dan atau\nmengatur keterapungan (buoyancy) pengguna agar dapat berada pada\nposisi tenggelam (negative buoyant) atau melayang (neutral buoyant) di\ndalam air.\n\uf0a1Jenis pelampung terdiri dari jaket keselamatan (life jacket), rompi\nkeselamatan (life vest), rompi pengatur keterapungan (Bouyancy Control\nDevice) .\nPASAL 7AYAT 1\n\uf0a1Pengusaha atau Pengurus wajib melaksanakan manajemen APD di\ntempat kerja .\nPASAL 7AYAT 2\n\uf0a1Manajemen APD sebagaimana dimaksud pada ayat (1),meliputi :\n\u25aaIdentifikasi kebutuhan dan syarat APD ;\n\u25aaPemilihan APD yang sesuai dengan jenis bahaya dan kebutuhan/kenyamanan\nPekerja/Buruh ;\n\u25aaPelatihan ;\n\u25aaPenggunaan, perawatan, dan penyimpanan ;\n\u25aaPenatalaksanaan pembuangan atau pemusnahan ;\n\u25aaPembinaan ;\n\u25aaInspeksi ;dan\n\u25aaEvaluasi dan pelaporan .\n\uf0a1Mampu menghindari energi berbahaya pada keadaan\ntertentu\n\uf0a1Bahan yang dipakai berkualitas baik\n\uf0a1Bentuknya sesuai dengan bentuk tubuh\n\uf0a1Dirancang dengan baik dan memiliki penampilan yang\n\nDOCUMENT 4:\nmenarik\n\uf0a1Mudah untuk melakukan pekerjaan\n\uf0a1Mudah untuk dipakai dan menanggalkannya\n\uf0a1Tidak menimbulkan beban pada gerakan tubuh\n\uf0a1Memenuhi standard\n\uf0a1Memiliki sertifikat\n\n\uf0a1Dipilih dan dipakai sesuai dengan kondisi lingkungan, potensi\nbahaya dan waktu pemakaian\n\uf0a1Penggunaan secara benar sesuai dengan pentunjuk\npemakaian\n\uf0a1Tenaga kerja harus dilatih secara berkala baik pemakaian dan\npemeliharaan\n\uf0a1Laporkan apabila ada perubahan pada bagian APD\n\uf0a1Mengisi form logbook terkait dengan penggunaan APD\n\nPemeriksaan APD\n\uf0a1Periksa keberadaan\n\uf0a1Periksa kelengkapan\n\uf0a1Periksa fungsional\n\uf0a1Periksa kebersihan\nPerawatan\n\uf0a1Bersihkan dengan air bersih,\n\uf0a1Hindari penggunaan bahan kimia untuk membersihkan,\n\uf0a1Keringkan sebelum disimpan\nPenyimpanan\n\uf0a1Simpan sesuai dengan kelompoknya\n\uf0a1Jauhkan dari sinar matahari\n\uf0a1Simpan dengan ventilasi yang baik\n\uf0a1Jauhkan dengan peralatan yang mengeluarkan radiasi\n\uf0a1Jauhkan dari bahan kimia \n\nPASAL 8\n1) APD yang rusak, retak atau tidak dapat berfungsi dengan baik\n\nDOCUMENT 5:\n\uf0a1Dilakukan pekerjaan yang mengandung bahaya tertimbun tanah, kejatuhan,\nterkena pelantingan benda, terjatuh atau terperosok, hanyut atau terpelanting ;\n\uf0a1Dilakukan pekerjaan dalam ruang terbatas tangki, sumur atau lubang ;\n\uf0a1Terdapat atau menyebar suhu, kelembaban, debu, kotoran, api, asap, gas,\nhembusan angin, cuaca, sinar atau radiasi, suara atau getaran ;\n\uf0a1Alat pelindung dirimeliputi :\n\u25aaPelindung kepala,\n\u25aaPelindung mata dan muka,\n\u25aaPelindung telinga,\n\u25aaPelindung pernapasan beserta perlengkapannya,\n\u25aaPelindung tangan,\n\u25aaPelindung kaki.\n\uf0a1Yang termasuk APD,\n\u25aaPakaian pelindung,\n\u25aaAlat pelindung jatuh perorangan,\n\u25aaPelampung .\n\uf0a1Pakaian pelindung berfungsi untuk melindungi\nbadan sebagian atau seluruh bagian badan dari\nbahaya temperatur panas atau dingin yang\nekstrim, pajanan api dan benda -benda panas,\npercikan bahan -bahan kimia, cairan dan logam\npanas ,uap panas, benturan (impact) dengan\nmesin, peralatan dan bahan, tergores ,radiasi,\nbinatang, mikro -organisme patogen dari\n\nPERTANYAAN: berikan saya dokumen tentang APD\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:30:17,886 - rag-chatbot - INFO - Menyimpan riwayat kueri: 'berikan saya dokumen tentang APD'
2025-05-05 14:30:17,887 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,893 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,906 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 1
2025-05-05 14:30:17,906 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 1
2025-05-05 14:30:17,906 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,911 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,913 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 1
2025-05-05 14:30:17,914 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,918 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,919 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 1
2025-05-05 14:30:17,919 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,923 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,924 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 1
2025-05-05 14:30:17,924 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,926 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,927 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 1
2025-05-05 14:30:17,927 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:30:17,930 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:30:17,931 - rag-chatbot - ERROR - Global error handler caught: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'answer'), 'msg': 'Input should be a valid string', 'input': PredictionResult(content='Berikut adalah beberapa dokumen yang relevan dengan Alat Pelindung Diri (APD) berdasarkan permintaan Anda:\n\n1. **DOCUMENT 1**: \n   - Pasal 2 Ayat 2 memerintahkan bahwa APD harus sesuai dengan Standar Nasional Indonesia (SNI) atau standar yang berlaku.\n   - Pasal 2 Ayat 3 menyebutkan bahwa APD wajib diberikan oleh pengusaha secara cuma-cuma.\n   - Pasal 6 Ayat 1 menjelaskan bahwa pekerja/buruh harus memakai APD sesuai dengan potensi bahaya dan risiko di tempat kerja. \n   - Pasal 6 Ayat 2 memberi hak kepada pekerja untuk menolak pekerjaan jika APD yang disediakan tidak memenuhi ketentuan.\n   - Definisi APD sebagai alat yang memiliki kemampuan melindungi seseorang dari bahaya di tempat kerja.\n\n2. **DOCUMENT 3**: \n   - Pasal 7 Ayat 1 dan 7 Ayat 2 mendiskusikan manajemen APD, termasuk identifikasi kebutuhan, pemilihan, pelatihan, penggunaan, perawatan, penyimpanan, pembuangan, dan evaluasi.\n\n3. **DOCUMENT 4**: \n   - Membahas pemeriksaan APD (periksa keberadaan, kelengkapan, fungsional, dan kebersihan), perawatan (bersihkan dengan air bersih, hindari penggunaan bahan kimia, keringkan sebelum disimpan), penyimpanan (simpan sesuai kelompoknya, jauhkan dari sinar matahari, simpan dengan ventilasi baik), dan pemeriksaan lainnya.\n\n4. **DOCUMENT 5**: \n   - Memberikan contoh pekerjaan yang memerlukan APD seperti pekerjaan tertimbun tanah, pelantingan benda, atau dalam ruang terbatas. Termasuk dalam kategori APD adalah pakaian pelindung dan alat pelindung jatuh perorangan.\n\nSaya telah mencantumkan dokumen-dokumen yang relevan dengan topik Alat Pelindung Diri (APD) berdasarkan permintaan Anda. Dokumen ini mendukung aspek hukum, manajemen, dan praktis penggunaan APD di tempat kerja.')}

2025-05-05 14:30:17,933 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/e206/miniconda3/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/e206/miniconda3/lib/python3.12/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/miniconda3/lib/python3.12/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'answer'), 'msg': 'Input should be a valid string', 'input': PredictionResult(content='Berikut adalah beberapa dokumen yang relevan dengan Alat Pelindung Diri (APD) berdasarkan permintaan Anda:\n\n1. **DOCUMENT 1**: \n   - Pasal 2 Ayat 2 memerintahkan bahwa APD harus sesuai dengan Standar Nasional Indonesia (SNI) atau standar yang berlaku.\n   - Pasal 2 Ayat 3 menyebutkan bahwa APD wajib diberikan oleh pengusaha secara cuma-cuma.\n   - Pasal 6 Ayat 1 menjelaskan bahwa pekerja/buruh harus memakai APD sesuai dengan potensi bahaya dan risiko di tempat kerja. \n   - Pasal 6 Ayat 2 memberi hak kepada pekerja untuk menolak pekerjaan jika APD yang disediakan tidak memenuhi ketentuan.\n   - Definisi APD sebagai alat yang memiliki kemampuan melindungi seseorang dari bahaya di tempat kerja.\n\n2. **DOCUMENT 3**: \n   - Pasal 7 Ayat 1 dan 7 Ayat 2 mendiskusikan manajemen APD, termasuk identifikasi kebutuhan, pemilihan, pelatihan, penggunaan, perawatan, penyimpanan, pembuangan, dan evaluasi.\n\n3. **DOCUMENT 4**: \n   - Membahas pemeriksaan APD (periksa keberadaan, kelengkapan, fungsional, dan kebersihan), perawatan (bersihkan dengan air bersih, hindari penggunaan bahan kimia, keringkan sebelum disimpan), penyimpanan (simpan sesuai kelompoknya, jauhkan dari sinar matahari, simpan dengan ventilasi baik), dan pemeriksaan lainnya.\n\n4. **DOCUMENT 5**: \n   - Memberikan contoh pekerjaan yang memerlukan APD seperti pekerjaan tertimbun tanah, pelantingan benda, atau dalam ruang terbatas. Termasuk dalam kategori APD adalah pakaian pelindung dan alat pelindung jatuh perorangan.\n\nSaya telah mencantumkan dokumen-dokumen yang relevan dengan topik Alat Pelindung Diri (APD) berdasarkan permintaan Anda. Dokumen ini mendukung aspek hukum, manajemen, dan praktis penggunaan APD di tempat kerja.')}


2025-05-05 14:32:57,066 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:57,066 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:57,067 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:32:57,067 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:32:57,067 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:57,068 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:57,068 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:57,068 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:57,068 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:32:57,068 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:32:57,068 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:57,068 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,307 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:32:58,308 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,308 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:32:58,308 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:32:58,309 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:32:58,327 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:32:58,328 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7a573ade9520>
2025-05-05 14:32:58,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:32:58,328 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:32:58,328 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:32:58,328 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:32:58,328 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:32:58,329 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'M9hdehdiAaODn+pWh6R65G1Ah3A=')])
2025-05-05 14:32:58,329 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:32:58,329 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,330 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,330 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,330 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:32:58,332 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:32:58,332 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:32:58,332 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,333 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:32:58,333 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:32:58,333 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:32:58,349 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:32:58,350 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7a573a9f4110>
2025-05-05 14:32:58,350 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:32:58,350 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:32:58,350 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:32:58,350 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:32:58,350 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:32:58,351 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'yq8pPbNGOnpqA8IN1h+1TZeENsY=')])
2025-05-05 14:32:58,351 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:32:58,351 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,351 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,351 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,351 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,352 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:32:58,352 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:32:58,366 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:33:05,495 - rag-chatbot - INFO - Menerima kueri chat: 'berikan saya dokumen tentang APD'
2025-05-05 14:33:05,502 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:33:05,503 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan saya dokumen tentang APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:33:05,525 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:33:05,525 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:33:05,525 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:05,532 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:05,532 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:33:05,538 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7762023673178301
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7732897400856072
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Hasil: chunk_id=9, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7325446169051769
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Hasil: chunk_id=10, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7174611260020074
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Hasil: chunk_id=4, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6719677839317579
2025-05-05 14:33:05,539 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:33:05,539 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:33:05,541 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\n\nDOCUMENT 2:\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\nDOCUMENT 3:\natau dipermukaan airagar terhindar dari bahaya tenggelam dan atau\nmengatur keterapungan (buoyancy) pengguna agar dapat berada pada\nposisi tenggelam (negative buoyant) atau melayang (neutral buoyant) di\ndalam air.\n\uf0a1Jenis pelampung terdiri dari jaket keselamatan (life jacket), rompi\nkeselamatan (life vest), rompi pengatur keterapungan (Bouyancy Control\nDevice) .\nPASAL 7AYAT 1\n\uf0a1Pengusaha atau Pengurus wajib melaksanakan manajemen APD di\ntempat kerja .\nPASAL 7AYAT 2\n\uf0a1Manajemen APD sebagaimana dimaksud pada ayat (1),meliputi :\n\u25aaIdentifikasi kebutuhan dan syarat APD ;\n\u25aaPemilihan APD yang sesuai dengan jenis bahaya dan kebutuhan/kenyamanan\nPekerja/Buruh ;\n\u25aaPelatihan ;\n\u25aaPenggunaan, perawatan, dan penyimpanan ;\n\u25aaPenatalaksanaan pembuangan atau pemusnahan ;\n\u25aaPembinaan ;\n\u25aaInspeksi ;dan\n\u25aaEvaluasi dan pelaporan .\n\uf0a1Mampu menghindari energi berbahaya pada keadaan\ntertentu\n\uf0a1Bahan yang dipakai berkualitas baik\n\uf0a1Bentuknya sesuai dengan bentuk tubuh\n\uf0a1Dirancang dengan baik dan memiliki penampilan yang\n\nDOCUMENT 4:\nmenarik\n\uf0a1Mudah untuk melakukan pekerjaan\n\uf0a1Mudah untuk dipakai dan menanggalkannya\n\uf0a1Tidak menimbulkan beban pada gerakan tubuh\n\uf0a1Memenuhi standard\n\uf0a1Memiliki sertifikat\n\n\uf0a1Dipilih dan dipakai sesuai dengan kondisi lingkungan, potensi\nbahaya dan waktu pemakaian\n\uf0a1Penggunaan secara benar sesuai dengan pentunjuk\npemakaian\n\uf0a1Tenaga kerja harus dilatih secara berkala baik pemakaian dan\npemeliharaan\n\uf0a1Laporkan apabila ada perubahan pada bagian APD\n\uf0a1Mengisi form logbook terkait dengan penggunaan APD\n\nPemeriksaan APD\n\uf0a1Periksa keberadaan\n\uf0a1Periksa kelengkapan\n\uf0a1Periksa fungsional\n\uf0a1Periksa kebersihan\nPerawatan\n\uf0a1Bersihkan dengan air bersih,\n\uf0a1Hindari penggunaan bahan kimia untuk membersihkan,\n\uf0a1Keringkan sebelum disimpan\nPenyimpanan\n\uf0a1Simpan sesuai dengan kelompoknya\n\uf0a1Jauhkan dari sinar matahari\n\uf0a1Simpan dengan ventilasi yang baik\n\uf0a1Jauhkan dengan peralatan yang mengeluarkan radiasi\n\uf0a1Jauhkan dari bahan kimia \n\nPASAL 8\n1) APD yang rusak, retak atau tidak dapat berfungsi dengan baik\n\nDOCUMENT 5:\n\uf0a1Dilakukan pekerjaan yang mengandung bahaya tertimbun tanah, kejatuhan,\nterkena pelantingan benda, terjatuh atau terperosok, hanyut atau terpelanting ;\n\uf0a1Dilakukan pekerjaan dalam ruang terbatas tangki, sumur atau lubang ;\n\uf0a1Terdapat atau menyebar suhu, kelembaban, debu, kotoran, api, asap, gas,\nhembusan angin, cuaca, sinar atau radiasi, suara atau getaran ;\n\uf0a1Alat pelindung dirimeliputi :\n\u25aaPelindung kepala,\n\u25aaPelindung mata dan muka,\n\u25aaPelindung telinga,\n\u25aaPelindung pernapasan beserta perlengkapannya,\n\u25aaPelindung tangan,\n\u25aaPelindung kaki.\n\uf0a1Yang termasuk APD,\n\u25aaPakaian pelindung,\n\u25aaAlat pelindung jatuh perorangan,\n\u25aaPelampung .\n\uf0a1Pakaian pelindung berfungsi untuk melindungi\nbadan sebagian atau seluruh bagian badan dari\nbahaya temperatur panas atau dingin yang\nekstrim, pajanan api dan benda -benda panas,\npercikan bahan -bahan kimia, cairan dan logam\npanas ,uap panas, benturan (impact) dengan\nmesin, peralatan dan bahan, tergores ,radiasi,\nbinatang, mikro -organisme patogen dari\n\nPERTANYAAN: berikan saya dokumen tentang APD\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:33:08,478 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'berikan saya dokumen tentang APD'
2025-05-05 14:33:08,479 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,485 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:08,496 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 2
2025-05-05 14:33:08,496 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 2
2025-05-05 14:33:08,496 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,501 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:08,503 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 2
2025-05-05 14:33:08,503 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,508 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:08,509 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 2
2025-05-05 14:33:08,509 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,514 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:08,516 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 2
2025-05-05 14:33:08,516 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,519 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:08,521 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 2
2025-05-05 14:33:08,521 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:08,525 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:38,607 - rag-chatbot - INFO - Menerima kueri chat: 'tentang apa iso 3001'
2025-05-05 14:33:38,607 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:33:38,607 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "tentang apa iso 3001", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:33:38,633 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:33:38,633 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:33:38,633 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:38,637 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:38,637 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:33:38,641 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Hasil: chunk_id=14, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.7096484688029178
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Hasil: chunk_id=13, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.7091491011038719
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Hasil: chunk_id=12, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6966557556371301
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6562363887185464
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Hasil: chunk_id=16, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6167006447941644
2025-05-05 14:33:38,641 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:33:38,641 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:33:38,641 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nISO juga merancang standar ISO 21500 Guidance on Project Management untuk menyelaraskan dengan ISO 31000:2018.\n\nKomite Proyek ISO/PC 317 menerbitkan ISO 31700 Perlindungan Konsumen - privasi berdasarkan desain untuk barang dan jasa konsumen pada Januari 2023.\nCakupan\n\nISO 31000:2018 menyediakan seperangkat prinsip, pedoman untuk desain, implementasi kerangka kerja manajemen risiko dan rekomendasi untuk penerapan proses manajemen risiko. Proses manajemen risiko seperti yang dijelaskan dalam ISO 31000 dapat diterapkan pada aktivitas apa pun, termasuk pengambilan keputusan di semua tingkatan.\n\nPerbedaan antara istilah kerangka kerja manajemen risiko dan proses manajemen risiko dijelaskan oleh ISO sebagai berikut:\n\nDOCUMENT 2:\nPada tahun 2020, ISO/TC 262, komite yang bertanggung jawab atas kelompok standar ini, telah menerbitkan lima standar, sementara empat standar tambahan sedang dalam tahap pengusulan/pengembangan.\n\nPublished standards :\n\n    ISO 31000:2018 - Risk management - Guidelines\n    ISO/TR 31004:2013 - Risk management - Guidance for the implementation of ISO 31000\n    ISO/IEC 31010:2019 - Risk management - Risk assessment techniques\n    ISO 31022:2020 - Risk management - Guidelines for the management of legal risk\n    ISO 31030:2021 Travel risk management \u2014 Guidance for organizations\n    IWA 31:2020 - Risk management - Guidelines on using ISO 31000 in management systems\n\nStandards under development:\n\n    ISO/AWI 31073 - Risk management - Vocabulary\n    ISO/WD 31050 - Guidance for managing emerging risks to enhance resilience\n    ISO/CD 31070 - Risk management - Guidelines on core concepts\n\nDOCUMENT 3:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 4:\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\n\nDOCUMENT 5:\nRuang lingkup pendekatan manajemen risiko ini adalah untuk memungkinkan semua tugas strategis, manajemen dan operasional organisasi di seluruh proyek, fungsi, dan proses untuk diselaraskan dengan seperangkat tujuan manajemen risiko yang sama.\n\nOleh karena itu, ISO 31000 ditujukan untuk kelompok pemangku kepentingan yang luas, termasuk:\n\n    Pemangku kepentingan tingkat eksekutif\n\n    Pemegang jabatan dalam kelompok manajemen risiko perusahaan\n\n    Analis risiko dan pejabat manajemen\n\n    Manajer lini dan manajer proyek\n\n    Auditor kepatuhan dan internal\n\n    Praktisi independen.\n\nPERTANYAAN: tentang apa iso 3001\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:33:39,691 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'tentang apa iso 3001'
2025-05-05 14:33:39,691 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,697 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:39,708 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 3
2025-05-05 14:33:39,708 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 3
2025-05-05 14:33:39,708 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,714 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:39,716 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 3
2025-05-05 14:33:39,716 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,720 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:39,721 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 3
2025-05-05 14:33:39,721 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,726 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:39,727 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 3
2025-05-05 14:33:39,728 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,731 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:33:39,732 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 3
2025-05-05 14:33:39,732 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:33:39,737 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:35,226 - rag-chatbot - INFO - Menerima kueri chat: 'ISO 3001'
2025-05-05 14:34:35,226 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:34:35,226 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 3, "endpoint": "embedString", "parameter": {"inputString": "ISO 3001", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:34:35,252 - RemoteCallHandler - DEBUG - {"call_id": 3, "event": "Received RPC result", "json": {"callId": 3, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:34:35,252 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:34:35,252 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:35,255 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:35,255 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:34:35,259 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Hasil: chunk_id=13, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6204509961336269
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Hasil: chunk_id=18, dokumen=b652717b-2882-49f6-b2b5-5574815dbbea.txt, similarity=0.6204509961336269
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Hasil: chunk_id=23, dokumen=fc445e07-bfc0-4c72-8e0e-8021db6327e1.txt, similarity=0.6204509961336269
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Hasil: chunk_id=14, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6131067506607334
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Hasil: chunk_id=19, dokumen=b652717b-2882-49f6-b2b5-5574815dbbea.txt, similarity=0.6131067506607334
2025-05-05 14:34:35,259 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:34:35,259 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:34:35,260 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 3, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nPada tahun 2020, ISO/TC 262, komite yang bertanggung jawab atas kelompok standar ini, telah menerbitkan lima standar, sementara empat standar tambahan sedang dalam tahap pengusulan/pengembangan.\n\nPublished standards :\n\n    ISO 31000:2018 - Risk management - Guidelines\n    ISO/TR 31004:2013 - Risk management - Guidance for the implementation of ISO 31000\n    ISO/IEC 31010:2019 - Risk management - Risk assessment techniques\n    ISO 31022:2020 - Risk management - Guidelines for the management of legal risk\n    ISO 31030:2021 Travel risk management \u2014 Guidance for organizations\n    IWA 31:2020 - Risk management - Guidelines on using ISO 31000 in management systems\n\nStandards under development:\n\n    ISO/AWI 31073 - Risk management - Vocabulary\n    ISO/WD 31050 - Guidance for managing emerging risks to enhance resilience\n    ISO/CD 31070 - Risk management - Guidelines on core concepts\n\nDOCUMENT 2:\nPada tahun 2020, ISO/TC 262, komite yang bertanggung jawab atas kelompok standar ini, telah menerbitkan lima standar, sementara empat standar tambahan sedang dalam tahap pengusulan/pengembangan.\n\nPublished standards :\n\n    ISO 31000:2018 - Risk management - Guidelines\n    ISO/TR 31004:2013 - Risk management - Guidance for the implementation of ISO 31000\n    ISO/IEC 31010:2019 - Risk management - Risk assessment techniques\n    ISO 31022:2020 - Risk management - Guidelines for the management of legal risk\n    ISO 31030:2021 Travel risk management \u2014 Guidance for organizations\n    IWA 31:2020 - Risk management - Guidelines on using ISO 31000 in management systems\n\nStandards under development:\n\n    ISO/AWI 31073 - Risk management - Vocabulary\n    ISO/WD 31050 - Guidance for managing emerging risks to enhance resilience\n    ISO/CD 31070 - Risk management - Guidelines on core concepts\n\nDOCUMENT 3:\nPada tahun 2020, ISO/TC 262, komite yang bertanggung jawab atas kelompok standar ini, telah menerbitkan lima standar, sementara empat standar tambahan sedang dalam tahap pengusulan/pengembangan.\n\nPublished standards :\n\n    ISO 31000:2018 - Risk management - Guidelines\n    ISO/TR 31004:2013 - Risk management - Guidance for the implementation of ISO 31000\n    ISO/IEC 31010:2019 - Risk management - Risk assessment techniques\n    ISO 31022:2020 - Risk management - Guidelines for the management of legal risk\n    ISO 31030:2021 Travel risk management \u2014 Guidance for organizations\n    IWA 31:2020 - Risk management - Guidelines on using ISO 31000 in management systems\n\nStandards under development:\n\n    ISO/AWI 31073 - Risk management - Vocabulary\n    ISO/WD 31050 - Guidance for managing emerging risks to enhance resilience\n    ISO/CD 31070 - Risk management - Guidelines on core concepts\n\nDOCUMENT 4:\nISO juga merancang standar ISO 21500 Guidance on Project Management untuk menyelaraskan dengan ISO 31000:2018.\n\nKomite Proyek ISO/PC 317 menerbitkan ISO 31700 Perlindungan Konsumen - privasi berdasarkan desain untuk barang dan jasa konsumen pada Januari 2023.\nCakupan\n\nISO 31000:2018 menyediakan seperangkat prinsip, pedoman untuk desain, implementasi kerangka kerja manajemen risiko dan rekomendasi untuk penerapan proses manajemen risiko. Proses manajemen risiko seperti yang dijelaskan dalam ISO 31000 dapat diterapkan pada aktivitas apa pun, termasuk pengambilan keputusan di semua tingkatan.\n\nPerbedaan antara istilah kerangka kerja manajemen risiko dan proses manajemen risiko dijelaskan oleh ISO sebagai berikut:\n\nDOCUMENT 5:\nISO juga merancang standar ISO 21500 Guidance on Project Management untuk menyelaraskan dengan ISO 31000:2018.\n\nKomite Proyek ISO/PC 317 menerbitkan ISO 31700 Perlindungan Konsumen - privasi berdasarkan desain untuk barang dan jasa konsumen pada Januari 2023.\nCakupan\n\nISO 31000:2018 menyediakan seperangkat prinsip, pedoman untuk desain, implementasi kerangka kerja manajemen risiko dan rekomendasi untuk penerapan proses manajemen risiko. Proses manajemen risiko seperti yang dijelaskan dalam ISO 31000 dapat diterapkan pada aktivitas apa pun, termasuk pengambilan keputusan di semua tingkatan.\n\nPerbedaan antara istilah kerangka kerja manajemen risiko dan proses manajemen risiko dijelaskan oleh ISO sebagai berikut:\n\nPERTANYAAN: ISO 3001\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:34:36,312 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'ISO 3001'
2025-05-05 14:34:36,312 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,315 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:36,329 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 4
2025-05-05 14:34:36,329 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 4
2025-05-05 14:34:36,329 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,334 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:36,336 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 7 dari kueri ID 4
2025-05-05 14:34:36,336 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,340 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:36,341 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 8 dari kueri ID 4
2025-05-05 14:34:36,341 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,346 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:36,347 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 4
2025-05-05 14:34:36,347 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,352 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:34:36,353 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 7 dari kueri ID 4
2025-05-05 14:34:36,353 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:34:36,356 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:18,107 - rag-chatbot - INFO - Menerima kueri chat: 'dokumen yang diambil di wikipedia'
2025-05-05 14:35:18,107 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:35:18,108 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 4, "endpoint": "embedString", "parameter": {"inputString": "dokumen yang diambil di wikipedia", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:35:18,134 - RemoteCallHandler - DEBUG - {"call_id": 4, "event": "Received RPC result", "json": {"callId": 4, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:35:18,134 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:35:18,134 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:18,138 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:18,138 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:35:18,142 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Hasil: chunk_id=12, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6785757360720317
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Hasil: chunk_id=17, dokumen=b652717b-2882-49f6-b2b5-5574815dbbea.txt, similarity=0.6785757360720317
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Hasil: chunk_id=22, dokumen=fc445e07-bfc0-4c72-8e0e-8021db6327e1.txt, similarity=0.6785757360720317
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6253099814242125
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Hasil: chunk_id=4, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6027422784124458
2025-05-05 14:35:18,142 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:35:18,142 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:35:18,142 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 4, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 2:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 3:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 4:\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\nDOCUMENT 5:\n\uf0a1Dilakukan pekerjaan yang mengandung bahaya tertimbun tanah, kejatuhan,\nterkena pelantingan benda, terjatuh atau terperosok, hanyut atau terpelanting ;\n\uf0a1Dilakukan pekerjaan dalam ruang terbatas tangki, sumur atau lubang ;\n\uf0a1Terdapat atau menyebar suhu, kelembaban, debu, kotoran, api, asap, gas,\nhembusan angin, cuaca, sinar atau radiasi, suara atau getaran ;\n\uf0a1Alat pelindung dirimeliputi :\n\u25aaPelindung kepala,\n\u25aaPelindung mata dan muka,\n\u25aaPelindung telinga,\n\u25aaPelindung pernapasan beserta perlengkapannya,\n\u25aaPelindung tangan,\n\u25aaPelindung kaki.\n\uf0a1Yang termasuk APD,\n\u25aaPakaian pelindung,\n\u25aaAlat pelindung jatuh perorangan,\n\u25aaPelampung .\n\uf0a1Pakaian pelindung berfungsi untuk melindungi\nbadan sebagian atau seluruh bagian badan dari\nbahaya temperatur panas atau dingin yang\nekstrim, pajanan api dan benda -benda panas,\npercikan bahan -bahan kimia, cairan dan logam\npanas ,uap panas, benturan (impact) dengan\nmesin, peralatan dan bahan, tergores ,radiasi,\nbinatang, mikro -organisme patogen dari\n\nPERTANYAAN: dokumen yang diambil di wikipedia\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:35:20,048 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'dokumen yang diambil di wikipedia'
2025-05-05 14:35:20,048 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,054 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:20,057 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 5
2025-05-05 14:35:20,057 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 5
2025-05-05 14:35:20,057 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,061 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:20,063 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 7 dari kueri ID 5
2025-05-05 14:35:20,063 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,068 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:20,069 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 8 dari kueri ID 5
2025-05-05 14:35:20,069 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,074 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:20,075 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 5
2025-05-05 14:35:20,075 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,080 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:35:20,081 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 5
2025-05-05 14:35:20,081 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:35:20,086 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,079 - rag-chatbot - INFO - Menerima kueri chat: 'lebih detil'
2025-05-05 14:38:21,079 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:38:21,079 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 5, "endpoint": "embedString", "parameter": {"inputString": "lebih detil", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:38:21,104 - RemoteCallHandler - DEBUG - {"call_id": 5, "event": "Received RPC result", "json": {"callId": 5, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:38:21,105 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:38:21,105 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,108 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,108 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:38:21,112 - rag-chatbot - INFO - Pencarian mengembalikan 4 hasil
2025-05-05 14:38:21,112 - rag-chatbot - DEBUG - Hasil: chunk_id=12, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.5034337793937053
2025-05-05 14:38:21,112 - rag-chatbot - DEBUG - Hasil: chunk_id=17, dokumen=b652717b-2882-49f6-b2b5-5574815dbbea.txt, similarity=0.5034337793937053
2025-05-05 14:38:21,112 - rag-chatbot - DEBUG - Hasil: chunk_id=22, dokumen=fc445e07-bfc0-4c72-8e0e-8021db6327e1.txt, similarity=0.5034337793937053
2025-05-05 14:38:21,112 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.5018153489718058
2025-05-05 14:38:21,112 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:38:21,112 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:38:21,112 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 5, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 2:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 3:\nDOKUMEN INI DIAMBIL DARI WIKIPEDIA\n\nISO 31000 adalah keluarga standar internasional pedoman penerapan manajemen risiko yang diterbitkan oleh International Organization for Standardization. Standar yang diterbitkan pada 13 November 2009 ini merupakan pengembangan standar AS/NZS 4360:2004 yang dikeluarkan oleh Standards Australia. ISO 31000 tidak dikembangkan untuk tujuan sertifikasi. ISO 31000 ini berisi panduan umum dan prinsip- prinsip yang digunakan untuk mengelola risiko yang mungkin berdampak buruk bagi organisasi karena dapat mempengaruhi reputasi organisasi dan kinerja ekonomi.\n\n\nISO 31000 berupaya menyediakan paradigma yang diakui secara universal bagi para praktisi dan perusahaan yang menggunakan proses manajemen risiko untuk menggantikan berbagai standar, metodologi, dan paradigma yang ada, yang berbeda antara industri, subjek, dan wilayah. Untuk tujuan ini, rekomendasi yang diberikan dalam ISO 31000 dapat disesuaikan dengan organisasi dan konteksnya.\n\nDOCUMENT 4:\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\nPERTANYAAN: lebih detil\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:38:21,932 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'lebih detil'
2025-05-05 14:38:21,932 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,938 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,949 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 6
2025-05-05 14:38:21,949 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 6
2025-05-05 14:38:21,949 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,952 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,954 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 7 dari kueri ID 6
2025-05-05 14:38:21,954 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,959 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,961 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 8 dari kueri ID 6
2025-05-05 14:38:21,961 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,966 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:38:21,968 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 6
2025-05-05 14:38:21,968 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:38:21,972 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:32,339 - rag-chatbot - INFO - Menerima kueri chat: 'dokumen bekerja di ketinggian'
2025-05-05 14:41:32,339 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:41:32,339 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 6, "endpoint": "embedString", "parameter": {"inputString": "dokumen bekerja di ketinggian", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:41:32,361 - RemoteCallHandler - DEBUG - {"call_id": 6, "event": "Received RPC result", "json": {"callId": 6, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:41:32,361 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:41:32,361 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:32,366 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:32,366 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:41:32,371 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Hasil: chunk_id=3, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6746710136728886
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Hasil: chunk_id=4, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6729442271060673
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Hasil: chunk_id=6, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6727733406098675
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Hasil: chunk_id=5, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.665780464755335
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Hasil: chunk_id=16, dokumen=48de4a4f-3b93-40b1-9a4d-238c045fe2ad.txt, similarity=0.6585092544555711
2025-05-05 14:41:32,371 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:41:32,371 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:41:32,371 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 6, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nmesin yang digunakan pada saat bekerja \nsehingga menimbulkan kecelakaan / cacat / \nluka / penyakit akibat kerja.\n\uf0a1Dibuat, dicoba, dipakai atau dipergunakan mesin, pesawat, alat perkakas,\nperalatan atau instalasi yang berbahaya yang dapat menimbulkan kecelakaan,\nkebakaran atau peledakan ;\n\uf0a1Dibuat, diolah, dipakai, dipergunakan, diperdagangkan, diangkut atau disimpan\nbahan atau barang yang dapat meledak, mudah terbakar, korosif, beracun,\nmenimbulkan infeksi, bersuhu tinggi atau bersuhu rendah ;\n\uf0a1Dikerjakan pembangunan ,perbaikan, perawatan, pembersihan atau pembongkaran\nrumah, gedung atau bangunan lainnya termasuk bangunan perairan ,saluran atau\nterowongan dibawah tanah dan sebagainya atau dimana dilakukan pekerjaan\npersiapan ;\n\uf0a1Dilakukan penyelaman ,pengambilan benda dan pekerjaan laindidalam air;\n\uf0a1Dilakukan pekerjaan pada ketinggian diatas permukaan tanah atau perairan ;\n\uf0a1Dilakukan pekerjaan dibawah tekanan udara atau suhu yang tinggi atau rendah ;\n\nDOCUMENT 2:\n\uf0a1Dilakukan pekerjaan yang mengandung bahaya tertimbun tanah, kejatuhan,\nterkena pelantingan benda, terjatuh atau terperosok, hanyut atau terpelanting ;\n\uf0a1Dilakukan pekerjaan dalam ruang terbatas tangki, sumur atau lubang ;\n\uf0a1Terdapat atau menyebar suhu, kelembaban, debu, kotoran, api, asap, gas,\nhembusan angin, cuaca, sinar atau radiasi, suara atau getaran ;\n\uf0a1Alat pelindung dirimeliputi :\n\u25aaPelindung kepala,\n\u25aaPelindung mata dan muka,\n\u25aaPelindung telinga,\n\u25aaPelindung pernapasan beserta perlengkapannya,\n\u25aaPelindung tangan,\n\u25aaPelindung kaki.\n\uf0a1Yang termasuk APD,\n\u25aaPakaian pelindung,\n\u25aaAlat pelindung jatuh perorangan,\n\u25aaPelampung .\n\uf0a1Pakaian pelindung berfungsi untuk melindungi\nbadan sebagian atau seluruh bagian badan dari\nbahaya temperatur panas atau dingin yang\nekstrim, pajanan api dan benda -benda panas,\npercikan bahan -bahan kimia, cairan dan logam\npanas ,uap panas, benturan (impact) dengan\nmesin, peralatan dan bahan, tergores ,radiasi,\nbinatang, mikro -organisme patogen dari\n\nDOCUMENT 3:\n\uf0a1Jenis Pelindung kaki berupa sepatu\nkeselamatan pada pekerjaan peleburan,\npengecoran logam, industri, kontruksi\nbangunan, pekerjaan yang berpotensi bahaya\npeledakan, bahaya listrik, tempat kerja yang\nbasah atau licin, bahan kimia dan jasad renik,\ndan/atau bahaya binatang dan lain-lain.\n\n\uf0a1Pelindung tangan (sarung tangan) adalah alat\npelindung yang berfungsi untuk melindungi\ntangan dan jari-jaritangan dari pajanan api, suhu\npanas, suhu dingin, radiasi elektromagnetik,\nradiasi mengion, arus listrik, bahan kimia,\nbenturan, pukulan dan tergores, terinfeksi zat\npatogen (virus, bakteri) dan jasad renik .\n\uf0a1Jenis pelindung tangan terdiri dari sarung tangan\nyang terbuat dari logam, kulit, kain kanvas, kain\natau kain berpelapis, karet, dan sarung tangan\nyang tahan bahan kimia .\n\n\n\uf0a1Alat pelindung mata dan muka adalah alat\npelindung yang berfungsi untuk melindungi\nmata dan muka dari paparan bahan kimia\nberbahaya, paparan partikel -partikel yang\nmelayang diudara dan dibadan air, percikan\n\nDOCUMENT 4:\nmanusia, binatang, tumbuhan dan lingkungan\nseperti virus, bakteri dan jamur .\n\uf0a1Jenis pakaian pelindung terdiri dari rompi\n(Vests), celemek (Apron/Coveralls), Jacket ,dan\npakaian pelindung yang menutupi sebagian\natau seluruh bagian badan .\n\n\uf0a1Alat pelindung kepala adalah alat pelindung\nyang berfungsi untuk melindungi kepala dari\nbenturan, terantuk, kejatuhan atau terpukul\nbenda tajam atau benda keras yang melayang\natau meluncur diudara, terpapar oleh radiasi\npanas, api, percikan bahan -bahan kimia, jasad\nrenik (mikro organisme) dan suhu yang ekstrim .\n\uf0a1Jenis alat pelindung kepala terdiri dari helm\npengaman (safety helmet), topi atau tudung\nkepala, penutup atau pengaman rambut, dan lain-\nlain.\n\n\uf0a1Alat pelindung kaki berfungsi untuk melindungi\nkaki dari tertimpa atau berbenturan dengan\nbenda -benda berat, tertusuk benda tajam,\nterkena cairan panas atau dingin, uap panas,\nterpajan suhu yang ekstrim, terkena bahan kimia\nberbahaya dan jasad renik, tergelincir .\n\nDOCUMENT 5:\nRuang lingkup pendekatan manajemen risiko ini adalah untuk memungkinkan semua tugas strategis, manajemen dan operasional organisasi di seluruh proyek, fungsi, dan proses untuk diselaraskan dengan seperangkat tujuan manajemen risiko yang sama.\n\nOleh karena itu, ISO 31000 ditujukan untuk kelompok pemangku kepentingan yang luas, termasuk:\n\n    Pemangku kepentingan tingkat eksekutif\n\n    Pemegang jabatan dalam kelompok manajemen risiko perusahaan\n\n    Analis risiko dan pejabat manajemen\n\n    Manajer lini dan manajer proyek\n\n    Auditor kepatuhan dan internal\n\n    Praktisi independen.\n\nPERTANYAAN: dokumen bekerja di ketinggian\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:41:33,768 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'dokumen bekerja di ketinggian'
2025-05-05 14:41:33,768 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,774 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:33,785 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 7
2025-05-05 14:41:33,785 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 7
2025-05-05 14:41:33,785 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,788 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:33,789 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 7
2025-05-05 14:41:33,789 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,794 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:33,796 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 7
2025-05-05 14:41:33,796 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,801 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:33,803 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 7
2025-05-05 14:41:33,803 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,808 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:41:33,809 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 6 dari kueri ID 7
2025-05-05 14:41:33,809 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:41:33,814 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:32,958 - rag-chatbot - INFO - Menerima kueri chat: 'Monkey Board'
2025-05-05 14:43:32,958 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:43:32,958 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 7, "endpoint": "embedString", "parameter": {"inputString": "Monkey Board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:43:32,965 - RemoteCallHandler - DEBUG - {"call_id": 7, "event": "Received RPC result", "json": {"callId": 7, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:43:32,965 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:43:32,966 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:32,971 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:32,971 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:43:32,975 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6907001733779907
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6764681935310364
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6620870433993922
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6517141461372375
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6173133438024924
2025-05-05 14:43:32,975 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:43:32,975 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:43:32,976 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 7, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\n\nDOCUMENT 2:\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n\nDOCUMENT 3:\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\nDOCUMENT 4:\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n\nDOCUMENT 5:\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n\nPERTANYAAN: Monkey Board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:43:33,623 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Monkey Board'
2025-05-05 14:43:33,624 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,628 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:33,639 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 8
2025-05-05 14:43:33,639 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 8
2025-05-05 14:43:33,639 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,644 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:33,646 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 8
2025-05-05 14:43:33,646 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,650 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:33,652 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 8
2025-05-05 14:43:33,652 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,657 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:33,658 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 8
2025-05-05 14:43:33,658 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,661 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:43:33,662 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 8
2025-05-05 14:43:33,662 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:43:33,665 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:19,241 - rag-chatbot - INFO - Menerima kueri chat: 'tugas dari derick man'
2025-05-05 14:44:19,241 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:44:19,241 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 8, "endpoint": "embedString", "parameter": {"inputString": "tugas dari derick man", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:44:19,268 - RemoteCallHandler - DEBUG - {"call_id": 8, "event": "Received RPC result", "json": {"callId": 8, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:44:19,268 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:44:19,268 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:19,274 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:19,274 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:44:19,280 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6214566826820374
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Hasil: chunk_id=41, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6061387892878788
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.5889729261398315
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.5828953732785815
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Hasil: chunk_id=5, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.568961807365637
2025-05-05 14:44:19,280 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:44:19,280 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:44:19,280 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 8, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n\nDOCUMENT 2:\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 3 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nInstruksi Kerja  \nA. Persiapan  \n1. Pre-job safety meeting.  \n2. Membaca dan mengerti program.  \n3. Yakinka n bahwa escape chair , full body hardness, fall arrestor maupun  counter \nbalance  terpasang dengan kondisi baik dan bekerja dengan baik.  \n4. Yakinkan manila rope terpasang dan kondisinya baik.  \n5. Derrick Man memakai full body hardness  yang dikaitkan dengan fall arrestor  \nataupun counter balance  sebelum naik ke Monkey Board . \nB. Pelaksanaan   \n1. Derrick Man mulai  naik melalui  tangga yang tersedia  menuju  ke Monkey Board  \ndengan  mengkaitkan Hook Safety  pengait  ke anak  tangga  setiap 2 langkah. \nHal ini  dilakukan  terus  menerus  dengan  baik dan aman  sampai di Monkey \nBoard . \n2. Setelah Derrick Man sampai di Monkey Board  sebelum  memulai  pekerjaan,\n\nDOCUMENT 3:\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n\nDOCUMENT 4:\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\nDOCUMENT 5:\nmanusia, binatang, tumbuhan dan lingkungan\nseperti virus, bakteri dan jamur .\n\uf0a1Jenis pakaian pelindung terdiri dari rompi\n(Vests), celemek (Apron/Coveralls), Jacket ,dan\npakaian pelindung yang menutupi sebagian\natau seluruh bagian badan .\n\n\uf0a1Alat pelindung kepala adalah alat pelindung\nyang berfungsi untuk melindungi kepala dari\nbenturan, terantuk, kejatuhan atau terpukul\nbenda tajam atau benda keras yang melayang\natau meluncur diudara, terpapar oleh radiasi\npanas, api, percikan bahan -bahan kimia, jasad\nrenik (mikro organisme) dan suhu yang ekstrim .\n\uf0a1Jenis alat pelindung kepala terdiri dari helm\npengaman (safety helmet), topi atau tudung\nkepala, penutup atau pengaman rambut, dan lain-\nlain.\n\n\uf0a1Alat pelindung kaki berfungsi untuk melindungi\nkaki dari tertimpa atau berbenturan dengan\nbenda -benda berat, tertusuk benda tajam,\nterkena cairan panas atau dingin, uap panas,\nterpajan suhu yang ekstrim, terkena bahan kimia\nberbahaya dan jasad renik, tergelincir .\n\nPERTANYAAN: tugas dari derick man\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:44:21,338 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'tugas dari derick man'
2025-05-05 14:44:21,338 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,343 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:21,354 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 9
2025-05-05 14:44:21,355 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 9
2025-05-05 14:44:21,355 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,360 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:21,362 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 9
2025-05-05 14:44:21,362 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,366 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:21,367 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 9
2025-05-05 14:44:21,368 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,372 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:21,373 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 9
2025-05-05 14:44:21,373 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,378 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:44:21,379 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 9
2025-05-05 14:44:21,379 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:44:21,384 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:25,687 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan instruksi kerja TKI No. C4-037/PPC21210/2023-S9'
2025-05-05 14:45:25,687 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:45:25,687 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 9, "endpoint": "embedString", "parameter": {"inputString": "jelaskan instruksi kerja TKI No. C4-037/PPC21210/2023-S9", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:45:25,718 - RemoteCallHandler - DEBUG - {"call_id": 9, "event": "Received RPC result", "json": {"callId": 9, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:45:25,718 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:45:25,718 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:25,724 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:25,724 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:45:25,727 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:45:25,727 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7428868259720116
2025-05-05 14:45:25,728 - rag-chatbot - DEBUG - Hasil: chunk_id=34, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7092005437136033
2025-05-05 14:45:25,728 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7030958533287098
2025-05-05 14:45:25,728 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.6841570750615369
2025-05-05 14:45:25,728 - rag-chatbot - DEBUG - Hasil: chunk_id=6, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.6672358512878466
2025-05-05 14:45:25,728 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:45:25,728 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:45:25,728 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 9, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\n\nDOCUMENT 2:\n(Sr Engineer DWI Eng & Planning  \nMethod)   \nNarasumber  18 Oktober  \n2023  19 Oktober  \n2023   \n \n10 Rery Dwi  Saputra  \n(Engineer  DWI)  Narasumber  18 Oktober  \n2023  19 Oktober  \n2023   \n \n11 Teddyanto Soetedjo  \n(Coman  Drilling  Operation)  Narasumber  18 Oktober  \n2023  19 Oktober  \n2023   \n12 Arie Firman  \n(Sr Supervisor  Well Services)  Narasumber  18 Oktober  \n2023  19 Oktober  \n2023   \n \nLembar  persetujuan ini merupakan satu kesatuan yang tidak terpisahkan dengan \nSTK tersebut  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : ii dari iii  \n \nDAFTAR ISI  \n          Halaman  \n   \n Lembar Persetujuan STK \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ... i \n Daftar Isi\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026...  ii\n\nDOCUMENT 3:\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\nDOCUMENT 4:\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n\nDOCUMENT 5:\n\uf0a1Jenis Pelindung kaki berupa sepatu\nkeselamatan pada pekerjaan peleburan,\npengecoran logam, industri, kontruksi\nbangunan, pekerjaan yang berpotensi bahaya\npeledakan, bahaya listrik, tempat kerja yang\nbasah atau licin, bahan kimia dan jasad renik,\ndan/atau bahaya binatang dan lain-lain.\n\n\uf0a1Pelindung tangan (sarung tangan) adalah alat\npelindung yang berfungsi untuk melindungi\ntangan dan jari-jaritangan dari pajanan api, suhu\npanas, suhu dingin, radiasi elektromagnetik,\nradiasi mengion, arus listrik, bahan kimia,\nbenturan, pukulan dan tergores, terinfeksi zat\npatogen (virus, bakteri) dan jasad renik .\n\uf0a1Jenis pelindung tangan terdiri dari sarung tangan\nyang terbuat dari logam, kulit, kain kanvas, kain\natau kain berpelapis, karet, dan sarung tangan\nyang tahan bahan kimia .\n\n\n\uf0a1Alat pelindung mata dan muka adalah alat\npelindung yang berfungsi untuk melindungi\nmata dan muka dari paparan bahan kimia\nberbahaya, paparan partikel -partikel yang\nmelayang diudara dan dibadan air, percikan\n\nPERTANYAAN: jelaskan instruksi kerja TKI No. C4-037/PPC21210/2023-S9\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:45:27,282 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan instruksi kerja TKI No. C4-037/PPC21210/2023-S9'
2025-05-05 14:45:27,282 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,288 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:27,298 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 10
2025-05-05 14:45:27,298 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 10
2025-05-05 14:45:27,298 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,304 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:27,306 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 10
2025-05-05 14:45:27,306 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,309 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:27,310 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 10
2025-05-05 14:45:27,310 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,314 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:27,314 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 10
2025-05-05 14:45:27,314 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,317 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:45:27,318 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 10
2025-05-05 14:45:27,318 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:45:27,323 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:27,118 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:46:27,118 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:46:27,118 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 10, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:46:27,145 - RemoteCallHandler - DEBUG - {"call_id": 10, "event": "Received RPC result", "json": {"callId": 10, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:46:27,145 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:46:27,145 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:27,151 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:27,151 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:46:27,155 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 14:46:27,155 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:46:27,155 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:46:27,155 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 10, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan sumber dokumen.\n\nDOKUMEN YANG TERSEDIA:\nDOCUMENT 1:\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\n\nDOCUMENT 2:\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n\nDOCUMENT 3:\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n\nDOCUMENT 4:\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n\nDOCUMENT 5:\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:46:30,786 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:46:30,786 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,792 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:30,795 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 11
2025-05-05 14:46:30,795 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 11
2025-05-05 14:46:30,795 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,800 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:30,802 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 11
2025-05-05 14:46:30,802 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,807 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:30,809 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 11
2025-05-05 14:46:30,809 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,814 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:30,815 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 11
2025-05-05 14:46:30,815 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,820 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:46:30,821 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 11
2025-05-05 14:46:30,821 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:46:30,825 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:36,219 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:36,219 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:36,220 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:48:36,220 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:48:36,220 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:36,220 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:36,220 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:36,220 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:36,220 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 14:48:36,221 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 14:48:36,221 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:36,221 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,508 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 14:48:37,508 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,508 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:48:37,509 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:48:37,510 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:48:37,528 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:48:37,529 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x70fa94b85c70>
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:48:37,529 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'XWGunjj57VuCPImV1V0AYmsXR+w=')])
2025-05-05 14:48:37,530 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:48:37,530 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,531 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,531 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,531 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:37,532 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 14:48:37,532 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 14:48:37,532 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,533 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 14:48:37,533 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 14:48:37,533 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 14:48:37,563 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 14:48:37,564 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x70fa94bec470>
2025-05-05 14:48:37,564 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 14:48:37,564 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 14:48:37,564 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 14:48:37,564 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 14:48:37,564 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 14:48:37,565 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'4tAIwhTweQjpVRW2YreGFj7L2Cg=')])
2025-05-05 14:48:37,565 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 14:48:37,565 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,565 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,565 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,565 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,566 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:37,566 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 14:48:37,577 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 14:48:45,917 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:48:45,917 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:48:45,919 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:45,940 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:48:45,940 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:48:45,940 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:45,944 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:45,944 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:48:45,948 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 14:48:45,948 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:48:45,948 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:48:45,949 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\nDOCUMENT 1:\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\n\nDOCUMENT 2:\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n\nDOCUMENT 3:\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n\nDOCUMENT 4:\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n\nDOCUMENT 5:\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:48:49,532 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:48:49,532 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,537 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:49,543 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 12
2025-05-05 14:48:49,543 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 12
2025-05-05 14:48:49,543 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,548 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:49,550 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 12
2025-05-05 14:48:49,550 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,554 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:49,555 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 12
2025-05-05 14:48:49,555 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,559 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:49,561 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 12
2025-05-05 14:48:49,561 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,566 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:48:49,567 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 12
2025-05-05 14:48:49,567 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:48:49,571 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:04,688 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:50:04,688 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 14:50:04,688 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:50:04,714 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 14:50:04,714 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 14:50:04,714 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:04,720 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:04,720 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 14:50:04,727 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 14:50:04,727 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 14:50:04,727 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 14:50:04,727 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\nDOCUMENT 1:\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\n\nDOCUMENT 2:\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n\nDOCUMENT 3:\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n\nDOCUMENT 4:\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n\nDOCUMENT 5:\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 14:50:07,386 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 14:50:07,387 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,393 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:07,404 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 13
2025-05-05 14:50:07,404 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 13
2025-05-05 14:50:07,404 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,410 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:07,412 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 13
2025-05-05 14:50:07,412 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,417 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:07,420 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 13
2025-05-05 14:50:07,420 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,425 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:07,426 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 13
2025-05-05 14:50:07,426 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,430 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 14:50:07,432 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 13
2025-05-05 14:50:07,432 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 14:50:07,437 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:12:57,662 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:57,663 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:57,663 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:12:57,663 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:12:57,663 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:57,664 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:57,664 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:57,664 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:57,664 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:12:57,664 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:12:57,664 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:57,664 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,956 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 15:12:58,957 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,957 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:12:58,958 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:12:58,959 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:12:58,979 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:12:58,980 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7bb642f064e0>
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:12:58,981 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'dAB11gI8jgZHZSFaivhD9HJcAw4=')])
2025-05-05 15:12:58,982 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:12:58,982 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,983 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,984 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,984 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:12:58,985 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 15:12:58,985 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 15:12:58,985 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:58,986 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:12:58,986 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:12:58,986 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:12:59,002 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:12:59,003 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7bb642fece30>
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:12:59,004 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'FRNgrWQPyZqTRR0xHfEHvhFEEJw=')])
2025-05-05 15:12:59,004 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:12:59,004 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:59,006 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:59,006 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:59,006 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:59,008 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:12:59,008 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 15:12:59,021 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 15:13:08,116 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:13:08,116 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 15:13:08,118 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:13:08,139 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:13:08,139 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 15:13:08,139 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:08,143 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:08,143 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 15:13:08,147 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 15:13:08,147 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 15:13:08,147 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 15:13:08,149 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\n\nDOKUMEN 1: 50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf (standard_safety)\n--------------------------------------\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\n\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:13:10,909 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:13:10,909 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,915 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:10,926 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 14
2025-05-05 15:13:10,926 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 14
2025-05-05 15:13:10,926 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,931 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:10,932 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 14
2025-05-05 15:13:10,932 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,937 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:10,939 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 14
2025-05-05 15:13:10,939 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,944 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:10,946 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 14
2025-05-05 15:13:10,946 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,951 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:13:10,952 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 14
2025-05-05 15:13:10,952 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:13:10,955 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:20,513 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:20,513 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:20,514 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:16:20,514 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:16:20,514 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:20,514 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:20,514 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:20,514 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:20,514 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:16:20,514 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:16:20,515 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:20,515 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,916 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 15:16:21,917 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,917 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:16:21,917 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:16:21,918 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:16:21,936 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:16:21,937 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x74f5183764b0>
2025-05-05 15:16:21,937 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:16:21,937 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:16:21,938 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:16:21,938 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:16:21,938 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:16:21,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'XkOaqi4yzJek7v4E36DyWObNQ5I=')])
2025-05-05 15:16:21,939 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:16:21,939 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,941 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,941 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,941 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:21,943 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 15:16:21,943 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 15:16:21,943 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,943 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:16:21,943 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:16:21,944 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:16:21,960 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:16:21,961 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x74f5183e8e30>
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:16:21,962 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'+gPFyz7wTBIAp+aesFWpGw8fJdM=')])
2025-05-05 15:16:21,963 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:16:21,963 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,964 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,964 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,964 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,965 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:21,965 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 15:16:21,977 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 15:16:29,558 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:16:29,559 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 15:16:29,560 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:29,584 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:16:29,584 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 15:16:29,584 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:29,590 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:29,590 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 15:16:29,594 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 15:16:29,594 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 15:16:29,594 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 15:16:29,595 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 15:16:29,595 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 15:16:29,595 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 15:16:29,595 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 15:16:29,595 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 15:16:29,596 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten safety AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nBerikan jawaban yang lengkap, akurat, dan bermanfaat sesuai dengan dokumen terkait. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\n\nDOKUMEN 1: 50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf (standard_safety)\n--------------------------------------\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\n\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:16:35,977 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:16:35,978 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:35,983 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:35,985 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 15
2025-05-05 15:16:35,985 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 15
2025-05-05 15:16:35,985 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:35,988 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:35,989 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 15
2025-05-05 15:16:35,989 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:35,993 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:35,995 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 15
2025-05-05 15:16:35,995 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:35,999 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:36,000 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 15
2025-05-05 15:16:36,000 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:36,004 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:16:36,006 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 15
2025-05-05 15:16:36,006 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:16:36,011 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:14,560 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:14,560 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:14,561 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:19:14,561 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:19:14,561 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:14,561 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:14,561 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:14,562 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:14,562 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 15:19:14,562 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 15:19:14,562 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:14,563 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,815 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 15:19:15,819 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,819 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:19:15,819 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:19:15,820 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:19:15,839 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:19:15,840 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x73bd7a98de20>
2025-05-05 15:19:15,840 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:19:15,840 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:19:15,840 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:19:15,841 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:19:15,841 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:19:15,841 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'28aNViqGNzbjT8xNS3BywovaFX8=')])
2025-05-05 15:19:15,841 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:19:15,841 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,842 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,842 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,842 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:15,843 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 15:19:15,844 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 15:19:15,844 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,844 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 15:19:15,844 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 15:19:15,845 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 15:19:15,859 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 15:19:15,860 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x73bd7a9f4ce0>
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 15:19:15,860 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'i7rAdjIMzNaKpcE1NEgnVDHSjV0=')])
2025-05-05 15:19:15,860 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 15:19:15,861 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,861 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,861 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,861 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,862 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:15,863 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 15:19:15,874 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 15:19:21,738 - rag-chatbot - INFO - Menerima kueri chat: 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:19:21,738 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 15:19:21,740 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:21,762 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:19:21,763 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 15:19:21,763 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:21,768 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:21,768 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 15:19:21,772 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7906653881072998
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7713086605072021
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7610134482383728
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Hasil: chunk_id=40, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7343719224444608
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf, similarity=0.7199025917111296
2025-05-05 15:19:21,772 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 15:19:21,772 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 15:19:21,773 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten safety AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nBerikan jawaban yang lengkap, akurat, dan bermanfaat persis dengan dokumen terkait. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\n\nDOKUMEN 1: 50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf (standard_safety)\n--------------------------------------\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\n4. Monkey Board  adalah tempat menyandarkan bagian rangkaian pipa bor yang sedang \ntidak digunakan (pada saat dilakukan cabut pipa).  \n5. Packer  adalah alat yang berfungsi untuk pembatas (sealing) antara tubing dan casing, \ndrill pipe dengan casing.  \n6. Perusahaan adalah PT Pertamina EP Cepu (PEPC) Regional 4.  \n7. Rangkaian Pipa Produksi (RPP) adalah fluida yang berasal dari formasi, mengalir \ndari dasar lubang ke permukaan melalui tubing ( string ). \n \n Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 2 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nReferensi  \n1. ISO 9001 : 2008 Klausul 7.5.1, tentang Pengendalian Produksi dan Penyediaan Jasa.  \n2. ISO 14001 : 2004 dan OHSAS 18001 : 2007, Klausal 4.4.6 , tentang Pengendalian \nOperasional.  \n3. SNI 13 -6910 -2002 mengenai Operasi Pemboran Darat dan Lepas Pantai di \nIndonesia -Pelaksanaan.   \nInternal Use Only\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\n\n\nPERTANYAAN: Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:19:29,123 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Instruksi kerja persiapan dan pelaksanaan pada pekerjaan melibatkan monkey board'
2025-05-05 15:19:29,123 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,127 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:29,137 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 16
2025-05-05 15:19:29,137 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 16
2025-05-05 15:19:29,137 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,141 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:29,143 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 16
2025-05-05 15:19:29,143 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,148 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:29,150 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 16
2025-05-05 15:19:29,150 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,154 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:29,155 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 16
2025-05-05 15:19:29,155 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,158 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:19:29,159 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 16
2025-05-05 15:19:29,159 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:19:29,164 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:25,249 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 15:23:25,249 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 15:23:25,249 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:23:25,273 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 15:23:25,274 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 15:23:25,274 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:25,279 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:25,279 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 15:23:25,283 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 15:23:25,283 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=c65cc5e7-85fe-4425-98a5-78611852c815.pdf, similarity=0.7353270649909973
2025-05-05 15:23:25,283 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=c65cc5e7-85fe-4425-98a5-78611852c815.pdf, similarity=0.7231300092676288
2025-05-05 15:23:25,284 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=c65cc5e7-85fe-4425-98a5-78611852c815.pdf, similarity=0.7189218448628674
2025-05-05 15:23:25,284 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7111744536369439
2025-05-05 15:23:25,284 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf, similarity=0.7106175846229557
2025-05-05 15:23:25,284 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 15:23:25,284 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 15:23:25,284 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten safety AI yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nManfaatkan informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nBerikan jawaban yang lengkap, akurat, dan bermanfaat persis dengan dokumen terkait. Jika relevan, sebutkan 1 sumber dokumen paling relevan\n\nDOKUMEN YANG PALING MIRIP:\n\nDOKUMEN 1: c65cc5e7-85fe-4425-98a5-78611852c815.pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 15:23:30,268 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 15:23:30,268 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,274 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:30,285 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 17
2025-05-05 15:23:30,285 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 17
2025-05-05 15:23:30,285 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,290 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:30,292 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 17
2025-05-05 15:23:30,292 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,295 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:30,297 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 17
2025-05-05 15:23:30,297 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,300 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:30,301 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 17
2025-05-05 15:23:30,301 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,306 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 15:23:30,307 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 17
2025-05-05 15:23:30,307 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 15:23:30,312 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:20:20,622 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:20,622 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:20,623 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:20:20,623 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:20:20,623 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:20,624 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:20,624 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:20,624 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:20,624 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:20:20,624 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:20:20,625 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:20,625 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,890 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:20:21,891 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,892 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:20:21,892 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:20:21,893 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:20:21,914 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:20:21,914 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7bb71d3a2360>
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:20:21,915 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'YS30iCdy57sZtiHKvJhcz51/fLg=')])
2025-05-05 16:20:21,915 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:20:21,915 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,916 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,916 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,916 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:21,917 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:20:21,918 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:20:21,918 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,918 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:20:21,918 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:20:21,918 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:20:21,936 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:20:21,937 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7bb71d3d2270>
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:20:21,937 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'76rV3Qs8rAY92cCrQoAs03OhKSQ=')])
2025-05-05 16:20:21,937 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:20:21,938 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,938 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,938 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,938 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,939 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:20:21,939 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:20:21,949 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:20:30,710 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:20:30,710 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:20:30,711 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:30,733 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:20:30,733 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:20:30,733 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:20:30,740 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:20:30,740 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:20:30,743 - rag-chatbot - ERROR - Error saat pencarian chunks: syntax error at or near "d"
LINE 7:                 d.category AS category,
                        ^

2025-05-05 16:20:30,743 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 163, in search_similar_chunks
    cursor.execute(query, (query_embedding, query_embedding, similarity_threshold, query_embedding, max_chunks))
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.SyntaxError: syntax error at or near "d"
LINE 7:                 d.category AS category,
                        ^


2025-05-05 16:20:30,744 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:20:30,744 - rag-chatbot - ERROR - Error saat memproses kueri chat: syntax error at or near "d"
LINE 7:                 d.category AS category,
                        ^

2025-05-05 16:20:30,744 - rag-chatbot - ERROR - Traceback (most recent call last):
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 301, in chat
    similar_chunks = search_similar_chunks(
                     ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/e206/hazopPoleng/backendLLM/chatbot2_api.py", line 163, in search_similar_chunks
    cursor.execute(query, (query_embedding, query_embedding, similarity_threshold, query_embedding, max_chunks))
  File "/home/e206/miniconda3/lib/python3.12/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.SyntaxError: syntax error at or near "d"
LINE 7:                 d.category AS category,
                        ^


2025-05-05 16:22:05,915 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:05,916 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:05,916 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:22:05,916 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:22:05,917 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:05,917 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:05,917 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:05,917 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:05,918 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:22:05,918 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:22:05,918 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:05,918 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,069 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:22:07,070 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,070 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:22:07,071 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:22:07,072 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:22:07,113 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:22:07,115 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7a575356b890>
2025-05-05 16:22:07,115 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:22:07,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:22:07,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:22:07,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:22:07,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:22:07,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'V3zReXbd9FhJk5gXK+BiSlWcwa0=')])
2025-05-05 16:22:07,117 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:22:07,118 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,119 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,119 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,119 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:07,120 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:22:07,120 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:22:07,120 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,120 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:22:07,121 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:22:07,121 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:22:07,132 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:22:07,133 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7a57535d1fa0>
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:22:07,134 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'sa0ai6tvIEeEFETwOakV6er1cZY=')])
2025-05-05 16:22:07,134 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:22:07,134 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,135 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,135 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,135 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,137 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:07,137 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:22:07,147 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:22:16,623 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:22:16,623 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:22:16,624 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:16,649 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:22:16,650 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:22:16,650 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:16,655 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:16,655 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:22:16,659 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:22:16,659 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:22:16,660 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:22:16,660 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nGunakan HANYA informasi dari dokumen yang diberikan untuk menjawab pertanyaan. \nJika jawabannya tidak ada dalam dokumen, katakan bahwa kamu tidak dapat menjawab berdasarkan dokumen yang tersedia.\nBerikan jawaban yang ringkas, akurat, dan bermanfaat. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:22:18,585 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:22:18,585 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,590 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:18,600 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 18
2025-05-05 16:22:18,600 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 18
2025-05-05 16:22:18,600 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,606 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:18,608 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 18
2025-05-05 16:22:18,608 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,612 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:18,614 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 18
2025-05-05 16:22:18,614 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,619 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:18,621 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 18
2025-05-05 16:22:18,621 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,625 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:22:18,626 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 18
2025-05-05 16:22:18,626 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:22:18,631 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:44,658 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:44,658 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:44,659 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:24:44,659 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:24:44,659 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:44,659 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:44,659 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:44,659 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:44,660 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:24:44,660 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:24:44,660 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:44,660 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,947 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:24:45,948 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,948 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:24:45,949 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:24:45,950 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:24:45,968 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:24:45,969 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7353a4b6f590>
2025-05-05 16:24:45,969 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:24:45,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:24:45,970 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:24:45,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:24:45,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:24:45,970 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'2ZquR2HlCI8cp6P3dS/VinYXfnk=')])
2025-05-05 16:24:45,970 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:24:45,971 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,971 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,972 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,972 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:45,974 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:24:45,974 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:24:45,974 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:45,974 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:24:45,975 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:24:45,975 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:24:46,005 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:24:46,006 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7353a4be1f70>
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:24:46,007 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'WlMgOFkYyjSvs1WAV+SqbW1LyMc=')])
2025-05-05 16:24:46,007 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:24:46,007 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:46,008 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:46,008 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:46,008 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:46,009 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:46,009 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:24:46,022 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:24:52,699 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:24:52,699 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:24:52,700 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:52,724 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:24:52,724 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:24:52,724 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:52,729 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:52,729 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:24:52,733 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:24:52,733 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:24:52,734 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:24:52,735 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:24:54,642 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:24:54,642 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,647 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:54,657 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 19
2025-05-05 16:24:54,657 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 19
2025-05-05 16:24:54,657 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,661 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:54,663 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 19
2025-05-05 16:24:54,663 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,668 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:54,670 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 19
2025-05-05 16:24:54,670 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,675 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:54,677 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 19
2025-05-05 16:24:54,677 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,681 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:24:54,682 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 19
2025-05-05 16:24:54,683 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:24:54,687 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:24,655 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:25:24,655 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:25:24,655 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:25:24,685 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:25:24,686 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:25:24,686 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:24,692 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:24,692 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:25:24,699 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:25:24,699 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:25:24,699 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:25:24,700 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:25:27,296 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:25:27,296 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,299 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:27,310 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 20
2025-05-05 16:25:27,310 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 20
2025-05-05 16:25:27,310 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,315 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:27,317 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 20
2025-05-05 16:25:27,317 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,320 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:27,322 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 20
2025-05-05 16:25:27,322 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,327 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:27,328 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 20
2025-05-05 16:25:27,328 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,333 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:27,334 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 20
2025-05-05 16:25:27,334 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:25:27,337 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:25:59,279 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:25:59,280 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:25:59,280 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:25:59,280 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:25:59,280 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:25:59,280 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:25:59,280 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:25:59,281 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:25:59,281 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:25:59,281 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:25:59,281 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:25:59,281 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,336 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:26:01,336 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,336 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:26:01,337 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:26:01,338 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:26:01,356 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:26:01,356 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79883bf77350>
2025-05-05 16:26:01,357 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:26:01,357 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:26:01,357 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:26:01,357 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:26:01,357 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:26:01,358 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'mYzEkHY2NjY460ocZvPlcJeuHfQ=')])
2025-05-05 16:26:01,358 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:26:01,359 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,359 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,359 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,359 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:01,361 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:26:01,361 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:26:01,361 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,361 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:26:01,362 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:26:01,362 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:26:01,392 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:26:01,393 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79883bfddfa0>
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:26:01,393 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'wq0AMr+A+vyPDo70eNZwBrzn1iI=')])
2025-05-05 16:26:01,393 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:26:01,393 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,394 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,394 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,394 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,395 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:01,395 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:26:01,405 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:26:07,984 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:26:07,984 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:26:07,985 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:08,015 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:26:08,015 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:26:08,015 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:08,021 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:08,021 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:26:08,025 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:26:08,025 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:26:08,025 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:26:08,025 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:26:08,025 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:26:08,025 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:26:08,026 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:26:08,026 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:26:08,027 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:26:16,730 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:26:16,730 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,734 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:16,745 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 21
2025-05-05 16:26:16,745 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 21
2025-05-05 16:26:16,745 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,748 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:16,750 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 21
2025-05-05 16:26:16,750 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,753 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:16,755 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 21
2025-05-05 16:26:16,755 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,760 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:16,761 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 21
2025-05-05 16:26:16,761 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,766 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:26:16,767 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 21
2025-05-05 16:26:16,767 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:26:16,772 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:04,074 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:04,074 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:04,075 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:30:04,075 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:30:04,075 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:04,075 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:04,075 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:04,076 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:04,076 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:30:04,076 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:30:04,076 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:04,076 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,402 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:30:05,402 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:30:05,403 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:30:05,404 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:30:05,425 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:30:05,426 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7df24af06d50>
2025-05-05 16:30:05,426 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:30:05,427 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:30:05,427 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:30:05,427 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:30:05,427 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:30:05,427 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'6aURG9+sqMeZDPEYvgvN9EoCOjI=')])
2025-05-05 16:30:05,427 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:30:05,427 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,428 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,428 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,428 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:05,430 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:30:05,430 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:30:05,431 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,431 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:30:05,431 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:30:05,431 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:30:05,454 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:30:05,455 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7df249bd2210>
2025-05-05 16:30:05,455 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:30:05,457 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:30:05,457 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:30:05,457 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:30:05,457 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:30:05,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'gjRjk1N4CE9U7/4ivt3f6WzHAF0=')])
2025-05-05 16:30:05,457 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:30:05,457 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,458 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,458 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,458 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,459 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:05,460 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:30:05,470 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:30:17,216 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:30:17,216 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:30:17,218 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:17,243 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:30:17,243 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:30:17,243 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:17,250 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:17,250 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:30:17,257 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:30:17,257 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:30:17,257 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:30:17,259 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:30:22,945 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:30:22,945 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,949 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:22,960 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 22
2025-05-05 16:30:22,960 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 22
2025-05-05 16:30:22,960 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,964 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:22,965 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 22
2025-05-05 16:30:22,966 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,970 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:22,972 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 22
2025-05-05 16:30:22,972 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,977 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:22,978 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 22
2025-05-05 16:30:22,978 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,982 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:30:22,983 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 22
2025-05-05 16:30:22,983 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:30:22,988 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:26,467 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:26,467 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:26,468 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:34:26,468 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:34:26,468 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:26,468 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:26,468 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:26,468 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:26,469 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:34:26,469 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:34:26,469 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:26,469 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,004 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:34:28,005 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,005 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:34:28,005 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:34:28,007 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:34:28,026 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:34:28,027 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75c4c1ba1460>
2025-05-05 16:34:28,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:34:28,027 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:34:28,027 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:34:28,028 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:34:28,028 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:34:28,028 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'csNtZa3pHRqqvvvd8MGqsjTENjY=')])
2025-05-05 16:34:28,028 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:34:28,028 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,029 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,029 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,029 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:28,031 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:34:28,031 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:34:28,031 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,031 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:34:28,032 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:34:28,032 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:34:28,049 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:34:28,050 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x75c4c1bce150>
2025-05-05 16:34:28,051 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:34:28,051 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:34:28,052 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:34:28,052 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:34:28,052 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:34:28,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'pvxb3cr47okTzSsQO/xAXLeYUCw=')])
2025-05-05 16:34:28,053 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:34:28,053 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,054 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,055 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,055 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,057 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:28,057 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:34:28,069 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:34:50,514 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:34:50,514 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:34:50,515 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar apd untuk lokasi onshore", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:50,541 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:34:50,541 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:34:50,542 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:50,548 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:50,548 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:34:50,553 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Hasil: chunk_id=69, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7353270649909973
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7231300092676288
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Hasil: chunk_id=70, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7189218448628674
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7111744536369439
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7106175846229557
2025-05-05 16:34:50,553 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:34:50,553 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:34:50,555 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nmasing.  \n1. Menyiapkan Jadwal \ninspeksi APD  \n4. Melaporkan hasil \ninspeksi  \nSelesai  \n3. Melaksanakan inspeksi APD sesuai jadwal  \n4. Menerima  hasil inspeksi  \ndan melaporkan hasil \ninspeksi   \n4. Menerima hasil inspeksi  \n5. Melaporkan hasil  \ninspeksi  \n5. Menerima hasil inspeksi  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nPENGENDALIAN KUALITAS ALAT PELINDUNG DIRI ( APD) MITRA KERJA  Phase Kontraktor  User  Officer Safety  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nStart  \n1. Menyerahkan sampel APD \nyang akan didistribusikan \nkepada mitra kerja  \n2. Menyerahkan sampel APD  \n3. Melakukan pemeriksaan \nkesesuaian kualitas dan  \njumlah APD  \n6. Menindaklanjuti APD (yang \nsesuai didistribusikan, yang \ntidak sesuai diganti)  \n4. Mengembalikan APD \ndilengkapi dengan keterangan \nsesuai/tidak sesuai  \n5. Mengembalikan APD\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n \n \n \nPEMUSNAHAN  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Officer  Environment & \nOfficer Security  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \nStart  \n1. Mengembalikan \nAPD rusak/cacat \nproduk/kadaluwarsa  \n2. Melakukan \npencatatan dan \nmelaporkan data \nAPD  \n3. Mengumpulkan \nseluruh APD  \n4. Melakukan pemilahan, \npenghancuran, dan \npemusnahan APD  \nEnd Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nLampiran 4 \u2013 TKO No. B8-021/PPC04100/2022 -S9 \nStandar APD  untuk Pekerja, Mitra Kerja dan Tamu  \n1. Coverall  untuk lokasi onshore\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: jelaskan standar apd untuk lokasi onshore\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:34:57,684 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar apd untuk lokasi onshore'
2025-05-05 16:34:57,684 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,690 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:57,700 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 23
2025-05-05 16:34:57,701 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 23
2025-05-05 16:34:57,701 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,706 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:57,708 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 23
2025-05-05 16:34:57,708 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,713 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:57,715 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 23
2025-05-05 16:34:57,715 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,719 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:57,720 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 23
2025-05-05 16:34:57,721 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,725 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:34:57,725 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 23
2025-05-05 16:34:57,725 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:34:57,729 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:44:01,594 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:01,594 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:01,595 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:44:01,595 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:44:01,595 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:01,595 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:01,595 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:01,595 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:01,596 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:44:01,596 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:44:01,596 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:01,596 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,921 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:44:04,922 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,922 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:44:04,922 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:44:04,923 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:44:04,941 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:44:04,942 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x763729f6b5f0>
2025-05-05 16:44:04,942 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:44:04,942 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:44:04,942 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:44:04,942 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:44:04,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:44:04,943 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'B00SD4CwYJO6U0PGhUxPDxap15M=')])
2025-05-05 16:44:04,943 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:44:04,943 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,944 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,945 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,945 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:44:04,946 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:44:04,946 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:44:04,946 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,947 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:44:04,947 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:44:04,948 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:44:04,980 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:44:04,981 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x763729fd4e60>
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:44:04,981 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'rrge83Zj2dilML0A1Poct/00xKs=')])
2025-05-05 16:44:04,981 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:44:04,982 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,982 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,982 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,982 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,984 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:44:04,984 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:44:04,994 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:45:06,498 - rag-chatbot - INFO - Menerima kueri chat: 'berikan penjelasan lengkap tentang standar pemakaian APD'
2025-05-05 16:45:06,498 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:45:06,499 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "berikan penjelasan lengkap tentang standar pemakaian APD", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:45:06,522 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:45:06,522 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:45:06,522 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:06,526 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:06,526 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:45:06,531 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Hasil: chunk_id=2, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7756622299946808
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7678587207836325
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Hasil: chunk_id=52, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7555267810821586
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Hasil: chunk_id=10, dokumen=16000479373.ManagementAPD.pdf, similarity=0.7542759922578353
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Hasil: chunk_id=58, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7537818697820993
2025-05-05 16:45:06,531 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:45:06,531 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:45:06,532 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\n\u25aaPASAL 2AYAT 2APD HARUS SESUAI DENGAN STANDAR NASIONAL INDONESIA (SNI)\nATAU STANDAR YANG BERLAKU .\n\u25aaPASAL 2AYAT 3APD WAJIB DIBERIKAN OLEH PENGUSAHA SECARA CUMA -CUMA .\n\u25aaPASAL 5PENGUSAHA ATAU PENGURUS WAJIB MENGUMUMKAN SECARA TERTULIS DAN\nMEMASANG RAMBU -RAMBU MENGENAI KEWAJIBAN PENGGUNAAN APD DITEMPAT\nKERJA .\n\u25aaPASAL 6AYAT 1PEKERJA/BURUH DAN ORANG LAIN YANG MEMASUKI TEMPAT KERJA\nWAJIB MEMAKAI ATAU MENGGUNAKAN APD SESUAI DENGAN POTENSI BAHAYA DAN\nRISIKO .\n\u25aaPASAL 6AYAT 2PEKERJA/BURUH BERHAK MENYATAKAN KEBERATAN UNTUK\nMELAKUKAN PEKERJAAN APABILA APD YANG DISEDIAKAN TIDAK MEMENUHI\nKETENTUAN DAN PERSYARATAN .\n\n\uf0a1Alat Pelindung Diri\u2192Personal Protective\nEquipments (PPE)\n\uf0a1Alat pelindung diri adalah suatu alat yang\nmempunyai kemampuan untuk melindungi\nseseorang dalam pekerjaan yang fungsinya\nmengisolasi tenaga kerja dari bahaya di\ntempat kerja\n\uf0a1Tujuan dari penggunaan APD adalah untuk \nmencegah terjadinya perpindahan energi / \nkontak antara pekerja dengan material /\nmenarik\n\uf0a1Mudah untuk melakukan pekerjaan\n\uf0a1Mudah untuk dipakai dan menanggalkannya\n\uf0a1Tidak menimbulkan beban pada gerakan tubuh\n\uf0a1Memenuhi standard\n\uf0a1Memiliki sertifikat\n\n\uf0a1Dipilih dan dipakai sesuai dengan kondisi lingkungan, potensi\nbahaya dan waktu pemakaian\n\uf0a1Penggunaan secara benar sesuai dengan pentunjuk\npemakaian\n\uf0a1Tenaga kerja harus dilatih secara berkala baik pemakaian dan\npemeliharaan\n\uf0a1Laporkan apabila ada perubahan pada bagian APD\n\uf0a1Mengisi form logbook terkait dengan penggunaan APD\n\nPemeriksaan APD\n\uf0a1Periksa keberadaan\n\uf0a1Periksa kelengkapan\n\uf0a1Periksa fungsional\n\uf0a1Periksa kebersihan\nPerawatan\n\uf0a1Bersihkan dengan air bersih,\n\uf0a1Hindari penggunaan bahan kimia untuk membersihkan,\n\uf0a1Keringkan sebelum disimpan\nPenyimpanan\n\uf0a1Simpan sesuai dengan kelompoknya\n\uf0a1Jauhkan dari sinar matahari\n\uf0a1Simpan dengan ventilasi yang baik\n\uf0a1Jauhkan dengan peralatan yang mengeluarkan radiasi\n\uf0a1Jauhkan dari bahan kimia \n\nPASAL 8\n1) APD yang rusak, retak atau tidak dapat berfungsi dengan baik\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\nJUDUL  : PENGELOLAAN ALAT PELINDUNG \nDIRI (APD)  DI LINGKUNGAN \nREGIONAL 4  REVISI KE  : \uf0520 \uf02a1 \uf02a2 \uf02a3 \uf02a4 \nBERLAKU TMT  : 30 November  2022  \nHAL : 2 dari 7 \n \n6. Apabil a stok tercukupi untuk kebutuhan APD ditambah dengan safety \nfactor  10%, maka dilakukan operasional pembagian dan evaluasi \npemakaian.  \n7. Apabila stok tidak tercukupi untuk keutuhan APD tertentu ditambah \ndengan  safety factor  10%, maka dilakukan proses pengadaan . \n8. Spesifikasi APD untuk tamu dan kontraktor mengacu pada Lampiran 4, \nkecuali desain dan warna. Desain dan warna disesuaikan dengan \nketentuan perusahaan kontraktor /mitra kerja masing -masing yang \nbermitra dengan PT Pertamina EP Cepu (Regional 4) . \n9. APD untuk mitra kerja sebelum didistribusikan kepada mitra \nkerja/kontraktor wajib dilakukan inspeksi oleh fungsi HSSE.  \n10. Perawata n APD dilakukan mengikuti ketentuan perawatan dari produsen \nAPD atau mengacu pada ketentuan Lampiran 4.\ndengan mengacu pada  Lampiran 4  dan pemeriksaan jumlah APD \ndengan mengacu pada  Lampiran 6 . \n4. Officer Safety  mengembalikan APD yang sudah diperiksa kepada \nUser  dilengkapi dengan keterangan sesuai/tidak sesuai dengan \nmenggunakan Formulir Berita Acara Pemeriksaan APD Nomor F-\n004/B8 -021/PPC04100/2022 -S9 pada Lampiran  10. \n5. User  mengembalikan APD kepada Kontraktor.  \n6. Kontraktor menerima APD dan menindaklanjuti ( APD yang sesuai \ndidistribusikan, yang tidak sesuai diganti).  \nE. Pemusnahan Alat Pelindung Diri  \n1. User  mengembalikan APD rusak/cacat produk/ kadaluwarsa  kepada \nOfficer Safety  dengan mengisi formulir F-005/B8 -\n021/PPC04100/2022 -S9 pada Lampiran  11. \n2. Officer Safety  melakukan pencatatan data APD rusak/ kadaluwarsa  \n3. Superintendent Fie ld HSSE  Ops mengumpulkan seluruh APD yang \nbekas/rusak/ kadaluwarsa  sebelum dimusnahkan.  \n4. Superintendent Field HSSE  Ops melakukan pemilahan  dan\n\n\n\nPERTANYAAN: berikan penjelasan lengkap tentang standar pemakaian APD\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:45:19,370 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'berikan penjelasan lengkap tentang standar pemakaian APD'
2025-05-05 16:45:19,370 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,376 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:19,387 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 24
2025-05-05 16:45:19,387 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 24
2025-05-05 16:45:19,387 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,391 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:19,392 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 24
2025-05-05 16:45:19,392 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,397 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:19,398 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 24
2025-05-05 16:45:19,398 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,403 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:19,404 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 24
2025-05-05 16:45:19,404 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,408 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:45:19,409 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 24
2025-05-05 16:45:19,409 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:45:19,413 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:49:21,973 - rag-chatbot - INFO - Permintaan download dokumen ID: 5
2025-05-05 16:49:21,974 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:49:21,978 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:49:21,979 - rag-chatbot - INFO - Mengirim file: 16000479373.ManagementAPD.pdf, path: uploads/d355299e-6eca-4bcb-bcbe-0dfd6fd54fae.pdf
2025-05-05 16:55:44,619 - rag-chatbot - INFO - Menerima kueri chat: 'halo'
2025-05-05 16:55:44,619 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:55:44,619 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "halo", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:55:44,643 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:55:44,643 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:55:44,643 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:44,648 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:44,648 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:55:44,653 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=16000479373.ManagementAPD.pdf, similarity=0.5469751251019652
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Hasil: chunk_id=132, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5427201279449579
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Hasil: chunk_id=83, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5420662972429859
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Hasil: chunk_id=129, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334462086393301
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Hasil: chunk_id=134, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334289828964767
2025-05-05 16:55:44,653 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:55:44,653 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:55:44,653 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nTidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording\n8 Shooter / Driller                      Internal Use Only\na. Face Shield  : Selalu memakai safety  glasses  atau goggles  ketika memakai face \nshield . Pemakaian face shield  saja tidak dianggap cukup untuk melindungi mata.  \nb. Welding Helmet  : Safety  glasses  atau goggles  harus dipakai ketika memakai  \n welding helmet . \n3. Pelindung Telinga  \na. Ketika tidak menggunakan ear plugs /earmuff  anda, simpan di  tempat yang bersih, \nsejuk dan k ering.  \nb. Jika ear plugs  foam  anda kotor, sobek atau keras, jangan digunakan lagi.  \nc. Jika ear plugs  PVC and a kotor, anda bisa membersihkannya dengan larutan sabun \nyang lembut dengan air. Kemudian keringkan. Jika sobek atau rapuh jangan \ndigunakan lagi.  \nd. Periksa selalu earmuffs  anda terhadap retakan di  sekitar foam cups . Jika earmuffs  \nanda rusak, minta untuk diperbaiki sesegera mungkin.  \n4. Pelindung Tangan dan Lengan  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nSetianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis\n6 Crew Drilling \u2013 Preloading dan\nAir Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording 8 Shooter / Driller Internal Use Only Dicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n\n\n\nPERTANYAAN: halo\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:55:46,119 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'halo'
2025-05-05 16:55:46,119 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,123 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:46,133 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 25
2025-05-05 16:55:46,134 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 25
2025-05-05 16:55:46,134 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,139 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:46,141 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 25
2025-05-05 16:55:46,141 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,146 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:46,148 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 25
2025-05-05 16:55:46,148 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,152 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:46,153 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 25
2025-05-05 16:55:46,153 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,156 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:55:46,156 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 25
2025-05-05 16:55:46,156 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:55:46,161 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:57:46,746 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:46,747 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:46,747 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:57:46,747 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:57:46,748 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:46,748 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:46,748 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:46,748 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:46,748 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:57:46,748 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:57:46,749 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:46,749 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,696 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:57:48,696 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,696 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:57:48,697 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:57:48,698 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:57:48,716 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:57:48,717 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x73233a3ac0b0>
2025-05-05 16:57:48,717 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:57:48,717 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:57:48,717 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:57:48,717 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:57:48,717 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:57:48,718 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'2lrO8u/KyG4Yh0nHW8/yU50erb0=')])
2025-05-05 16:57:48,718 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:57:48,718 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,719 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,719 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,719 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:48,721 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:57:48,721 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:57:48,721 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,721 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:57:48,722 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:57:48,722 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:57:48,738 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:57:48,739 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x73233a3da1e0>
2025-05-05 16:57:48,739 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:57:48,740 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:57:48,740 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:57:48,740 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:57:48,740 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:57:48,740 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'RGYZWYieFvSlltJpMtLaYtxTlqE=')])
2025-05-05 16:57:48,740 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:57:48,740 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,741 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,741 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,742 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,743 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:57:48,743 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:57:48,755 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 16:57:55,311 - rag-chatbot - INFO - Menerima kueri chat: 'halo'
2025-05-05 16:57:55,311 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:57:55,313 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "halo", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:55,335 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:57:55,335 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:57:55,335 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:57:55,342 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:57:55,342 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:57:55,348 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=16000479373.ManagementAPD.pdf, similarity=0.5469751251019652
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Hasil: chunk_id=132, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5427201279449579
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Hasil: chunk_id=83, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5420662972429859
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Hasil: chunk_id=129, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334462086393301
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Hasil: chunk_id=134, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334289828964767
2025-05-05 16:57:55,348 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:57:55,348 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:57:55,349 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nTidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording\n8 Shooter / Driller                      Internal Use Only\na. Face Shield  : Selalu memakai safety  glasses  atau goggles  ketika memakai face \nshield . Pemakaian face shield  saja tidak dianggap cukup untuk melindungi mata.  \nb. Welding Helmet  : Safety  glasses  atau goggles  harus dipakai ketika memakai  \n welding helmet . \n3. Pelindung Telinga  \na. Ketika tidak menggunakan ear plugs /earmuff  anda, simpan di  tempat yang bersih, \nsejuk dan k ering.  \nb. Jika ear plugs  foam  anda kotor, sobek atau keras, jangan digunakan lagi.  \nc. Jika ear plugs  PVC and a kotor, anda bisa membersihkannya dengan larutan sabun \nyang lembut dengan air. Kemudian keringkan. Jika sobek atau rapuh jangan \ndigunakan lagi.  \nd. Periksa selalu earmuffs  anda terhadap retakan di  sekitar foam cups . Jika earmuffs  \nanda rusak, minta untuk diperbaiki sesegera mungkin.  \n4. Pelindung Tangan dan Lengan  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nSetianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis\n6 Crew Drilling \u2013 Preloading dan\nAir Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording 8 Shooter / Driller Internal Use Only Dicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n\n\n\nPERTANYAAN: halo\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:58:00,941 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'halo'
2025-05-05 16:58:00,941 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,945 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:00,956 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 26
2025-05-05 16:58:00,956 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 26
2025-05-05 16:58:00,956 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,962 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:00,964 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 26
2025-05-05 16:58:00,964 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,967 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:00,969 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 26
2025-05-05 16:58:00,969 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,974 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:00,975 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 26
2025-05-05 16:58:00,975 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,980 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:00,982 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 26
2025-05-05 16:58:00,982 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:00,986 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:29,566 - rag-chatbot - INFO - Menerima kueri chat: 'halo'
2025-05-05 16:58:29,566 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 16:58:29,566 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "halo", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:58:29,593 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:58:29,593 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 16:58:29,593 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:29,600 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:29,600 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 16:58:29,614 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=16000479373.ManagementAPD.pdf, similarity=0.5469751251019652
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Hasil: chunk_id=132, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5427201279449579
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Hasil: chunk_id=83, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5420662972429859
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Hasil: chunk_id=129, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334462086393301
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Hasil: chunk_id=134, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334289828964767
2025-05-05 16:58:29,615 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 16:58:29,615 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 16:58:29,615 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika relevan, berikan link download dokumen yang tersedia.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nTidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording\n8 Shooter / Driller                      Internal Use Only\na. Face Shield  : Selalu memakai safety  glasses  atau goggles  ketika memakai face \nshield . Pemakaian face shield  saja tidak dianggap cukup untuk melindungi mata.  \nb. Welding Helmet  : Safety  glasses  atau goggles  harus dipakai ketika memakai  \n welding helmet . \n3. Pelindung Telinga  \na. Ketika tidak menggunakan ear plugs /earmuff  anda, simpan di  tempat yang bersih, \nsejuk dan k ering.  \nb. Jika ear plugs  foam  anda kotor, sobek atau keras, jangan digunakan lagi.  \nc. Jika ear plugs  PVC and a kotor, anda bisa membersihkannya dengan larutan sabun \nyang lembut dengan air. Kemudian keringkan. Jika sobek atau rapuh jangan \ndigunakan lagi.  \nd. Periksa selalu earmuffs  anda terhadap retakan di  sekitar foam cups . Jika earmuffs  \nanda rusak, minta untuk diperbaiki sesegera mungkin.  \n4. Pelindung Tangan dan Lengan  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nSetianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis\n6 Crew Drilling \u2013 Preloading dan\nAir Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording 8 Shooter / Driller Internal Use Only Dicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n\n\n\nPERTANYAAN: halo\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:58:31,522 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'halo'
2025-05-05 16:58:31,522 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,526 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:31,536 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 27
2025-05-05 16:58:31,537 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 27
2025-05-05 16:58:31,537 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,540 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:31,542 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 27
2025-05-05 16:58:31,542 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,551 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:31,553 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 27
2025-05-05 16:58:31,553 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,566 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:31,570 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 27
2025-05-05 16:58:31,570 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,588 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:58:31,592 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 27
2025-05-05 16:58:31,592 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 16:58:31,610 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 16:59:56,091 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:56,091 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:56,092 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:59:56,092 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:59:56,092 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:56,092 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/llm)", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:56,093 - SyncLMStudioWebsocket - DEBUG - {"event": "Disconnecting websocket session (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:56,093 - _AsyncWebsocketThread - INFO - {"event": "Websocket closed, terminating demultiplexing task.", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:56,093 - httpcore.http11 - DEBUG - response_closed.started
2025-05-05 16:59:56,093 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-05 16:59:56,093 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread terminated", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:56,094 - SyncLMStudioWebsocket - INFO - {"event": "Websocket session disconnected (ws://localhost:1234/embedding)", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,434 - rag-chatbot - INFO - Mencoba inisialisasi model embedding...
2025-05-05 16:59:57,435 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,435 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:59:57,436 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:59:57,437 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:59:57,472 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:59:57,473 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f7b0ab8ddf0>
2025-05-05 16:59:57,473 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:59:57,474 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:59:57,474 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:59:57,474 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:59:57,474 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:59:57,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'Gw4IDjvRKxHY3zoNAS9bIEcznZg=')])
2025-05-05 16:59:57,474 - httpx - INFO - HTTP Request: GET ws://localhost:1234/embedding "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:59:57,475 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,475 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,476 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/embedding)", "thread_id": "Thread-1", "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,476 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"identifier": "nomic-embed-text-v1.5", "loadConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}, "loadTtlMs": 3600000}, "endpoint": "getOrLoad", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 16:59:57,477 - rag-chatbot - INFO - Model embedding berhasil diinisialisasi.
2025-05-05 16:59:57,477 - rag-chatbot - INFO - Mencoba inisialisasi model LLM...
2025-05-05 16:59:57,477 - _AsyncWebsocketThread - INFO - {"event": "Websocket thread started", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,478 - asyncio - DEBUG - Using selector: EpollSelector
2025-05-05 16:59:57,478 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-05-05 16:59:57,478 - httpx - DEBUG - load_verify_locations cafile='/home/e206/miniconda3/lib/python3.12/site-packages/certifi/cacert.pem'
2025-05-05 16:59:57,496 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=1234 local_address=None timeout=5.0 socket_options=None
2025-05-05 16:59:57,496 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f7b0a7ce390>
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-05-05 16:59:57,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 101, b'Switching Protocols', [(b'Upgrade', b'websocket'), (b'Connection', b'Upgrade'), (b'Sec-WebSocket-Accept', b'tHEkjdvM/TvnPzYZLYCYeLpFFHM=')])
2025-05-05 16:59:57,497 - httpx - INFO - HTTP Request: GET ws://localhost:1234/llm "HTTP/1.1 101 Switching Protocols"
2025-05-05 16:59:57,497 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket connected", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,498 - _AsyncWebsocketThread - DEBUG - {"event": "Websocket authenticated", "json": {"success": true}, "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,498 - _AsyncWebsocketThread - INFO - {"event": "Websocket session established (ws://localhost:1234/llm)", "thread_id": "Thread-2", "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,498 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "listLoaded", "type": "rpcCall"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,499 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": ["..."], "type": "rpcResult"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 16:59:57,499 - rag-chatbot - INFO - Model LLM berhasil diinisialisasi.
2025-05-05 16:59:57,510 - rag-chatbot - INFO - Memulai server API Chatbot...
2025-05-05 17:00:01,359 - rag-chatbot - INFO - Menerima kueri chat: 'halo'
2025-05-05 17:00:01,359 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 17:00:01,361 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 1, "endpoint": "embedString", "parameter": {"inputString": "halo", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:00:01,382 - RemoteCallHandler - DEBUG - {"call_id": 1, "event": "Received RPC result", "json": {"callId": 1, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:00:01,382 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 17:00:01,382 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:01,387 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:01,387 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 17:00:01,392 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=16000479373.ManagementAPD.pdf, similarity=0.5469751251019652
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Hasil: chunk_id=132, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5427201279449579
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Hasil: chunk_id=83, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5420662972429859
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Hasil: chunk_id=129, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334462086393301
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Hasil: chunk_id=134, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334289828964767
2025-05-05 17:00:01,392 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 17:00:01,392 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 17:00:01,393 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 1, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika pengguna tidak bertanya tentang dokumen, jawab dengan pengetahuan umum anda.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nTidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording\n8 Shooter / Driller                      Internal Use Only\na. Face Shield  : Selalu memakai safety  glasses  atau goggles  ketika memakai face \nshield . Pemakaian face shield  saja tidak dianggap cukup untuk melindungi mata.  \nb. Welding Helmet  : Safety  glasses  atau goggles  harus dipakai ketika memakai  \n welding helmet . \n3. Pelindung Telinga  \na. Ketika tidak menggunakan ear plugs /earmuff  anda, simpan di  tempat yang bersih, \nsejuk dan k ering.  \nb. Jika ear plugs  foam  anda kotor, sobek atau keras, jangan digunakan lagi.  \nc. Jika ear plugs  PVC and a kotor, anda bisa membersihkannya dengan larutan sabun \nyang lembut dengan air. Kemudian keringkan. Jika sobek atau rapuh jangan \ndigunakan lagi.  \nd. Periksa selalu earmuffs  anda terhadap retakan di  sekitar foam cups . Jika earmuffs  \nanda rusak, minta untuk diperbaiki sesegera mungkin.  \n4. Pelindung Tangan dan Lengan  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nSetianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis\n6 Crew Drilling \u2013 Preloading dan\nAir Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording 8 Shooter / Driller Internal Use Only Dicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n\n\n\nPERTANYAAN: halo\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 17:00:02,525 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'halo'
2025-05-05 17:00:02,525 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,529 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:02,539 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 28
2025-05-05 17:00:02,539 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 28
2025-05-05 17:00:02,539 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,544 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:02,546 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 28
2025-05-05 17:00:02,546 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,550 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:02,552 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 28
2025-05-05 17:00:02,552 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,556 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:02,557 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 28
2025-05-05 17:00:02,557 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,561 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:00:02,562 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 28
2025-05-05 17:00:02,562 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:00:02,565 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,281 - rag-chatbot - INFO - Menerima kueri chat: 'halo'
2025-05-05 17:02:05,281 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 17:02:05,281 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 2, "endpoint": "embedString", "parameter": {"inputString": "halo", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:02:05,307 - RemoteCallHandler - DEBUG - {"call_id": 2, "event": "Received RPC result", "json": {"callId": 2, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:02:05,307 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 17:02:05,307 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,312 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,312 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 17:02:05,317 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Hasil: chunk_id=7, dokumen=16000479373.ManagementAPD.pdf, similarity=0.5469751251019652
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Hasil: chunk_id=132, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5427201279449579
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Hasil: chunk_id=83, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5420662972429859
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Hasil: chunk_id=129, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334462086393301
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Hasil: chunk_id=134, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.5334289828964767
2025-05-05 17:02:05,317 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 17:02:05,317 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 17:02:05,317 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 2, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika pengguna tidak bertanya tentang dokumen, jawab dengan pengetahuan umum anda.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nbenda -benda kecil ,panas, atau uap panas, radiasi\ngelombang elektromagnetik yang mengion\nmaupun yang tidak mengion, pancaran cahaya,\nbenturan atau pukulan benda keras atau benda\ntajam .\n\uf0a1Jenis alat pelindung mata dan muka terdiri\ndari kacamata pengaman (spectacles), goggles,\ntameng muka (face shield), masker selam,\ntameng muka dan kacamata pengaman dalam\nkesatuan (full face masker) .\n\n\uf0a1Alat pelindung telinga adalah alat pelindung yang berfungsi untuk\nmelindungi alat pendengaran terhadap kebisingan atau tekanan .\n\uf0a1Jenis alat pelindung telinga terdiri dari sumbat telinga (ear plug) dan\npenutup telinga (ear muff) .\n\n\uf0a1Alat pelindung pernapasan beserta\nperlengkapannya adalah alat pelindung yang\nberfungsi untuk melindungi organ pernapasan\ndengan cara menyalurkan udara bersih dan\nsehat dan/atau menyaring cemaran bahan\nkimia, mikro -organisme, partikel yang berupa\ndebu, kabut (aerosol), uap, asap, gas/ fume,\ndan sebagainya .\n\uf0a1Jenis alat pelindung pernapasan dan\n\n\nDOKUMEN 2: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\nTidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording\n8 Shooter / Driller                      Internal Use Only\na. Face Shield  : Selalu memakai safety  glasses  atau goggles  ketika memakai face \nshield . Pemakaian face shield  saja tidak dianggap cukup untuk melindungi mata.  \nb. Welding Helmet  : Safety  glasses  atau goggles  harus dipakai ketika memakai  \n welding helmet . \n3. Pelindung Telinga  \na. Ketika tidak menggunakan ear plugs /earmuff  anda, simpan di  tempat yang bersih, \nsejuk dan k ering.  \nb. Jika ear plugs  foam  anda kotor, sobek atau keras, jangan digunakan lagi.  \nc. Jika ear plugs  PVC and a kotor, anda bisa membersihkannya dengan larutan sabun \nyang lembut dengan air. Kemudian keringkan. Jika sobek atau rapuh jangan \ndigunakan lagi.  \nd. Periksa selalu earmuffs  anda terhadap retakan di  sekitar foam cups . Jika earmuffs  \nanda rusak, minta untuk diperbaiki sesegera mungkin.  \n4. Pelindung Tangan dan Lengan  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nSetianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali Welding Electrical Chemical Fire Fighting NO. FUNGSI / JABATAN Welding Apparel Welding Goggles / Helmet Respirator Under Welding Helmet Powered Air Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis\n6 Crew Drilling \u2013 Preloading dan\nAir Purifying Respirator Welding Helmet Set Respirator Welding Mask Welding Hand Gloves Arc Flash Suit*** High Voltage Electrical Helmet Face Shield ** Electrical Safety Shoes Sarung Tangan Elektrik Chemical Apron Chemical Goggles Chemical Shield Chemical Resistance Boot Hydrocarbon & Chemical Hand Gloves Fire Helmet Fire Suit Fire Gloves Fire Boots DWO / WS 1 Driller 1 x 2 1 x 2 1 x 2 1 x 2 2 Derrickman 1 x 2 1 x 2 1 x 2 1 x 2 3 Floorman 4 Driver Host 5 Helper 6 Mud Boy / Cutting Man 7 Operator Rig / Hoist 1 x 2 1 x 2 1 x 2 1 x 2 8 Roustabout 9 Company Man 1 x 2 1 x 2 1 x 2 1 x 2 10 WOWS Supervisor / Rig Supt / Toolpusher 1 x 2 1 x 2 1 x 2 1 x 2 SURVEY SEISMIK 1 Party Chief 2 Seismologist 3 Head Topo / Drilling / Observer 4 Petugas Handak 5 Crew Rintis 6 Crew Drilling \u2013 Preloading dan Redrill 7 Crew Recording 8 Shooter / Driller Internal Use Only Dicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n\n\n\nPERTANYAAN: halo\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 17:02:05,847 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'halo'
2025-05-05 17:02:05,847 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,851 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,862 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 29
2025-05-05 17:02:05,862 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 29
2025-05-05 17:02:05,862 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,867 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,869 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 29
2025-05-05 17:02:05,869 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,874 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,876 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 29
2025-05-05 17:02:05,876 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,881 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,881 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 29
2025-05-05 17:02:05,881 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,884 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:05,885 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 29
2025-05-05 17:02:05,885 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:05,888 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:23,163 - rag-chatbot - INFO - Menerima kueri chat: 'informasi dan jawaban terkait alat pelindung diri (APD) berdasarkan dokumen yang tersedia'
2025-05-05 17:02:23,164 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 17:02:23,164 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 3, "endpoint": "embedString", "parameter": {"inputString": "informasi dan jawaban terkait alat pelindung diri (APD) berdasarkan dokumen yang tersedia", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:02:23,173 - RemoteCallHandler - DEBUG - {"call_id": 3, "event": "Received RPC result", "json": {"callId": 3, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:02:23,173 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 17:02:23,173 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:23,178 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:23,178 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 17:02:23,183 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Hasil: chunk_id=51, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.8164816146040448
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Hasil: chunk_id=11, dokumen=16000479373.ManagementAPD.pdf, similarity=0.8008198023331061
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Hasil: chunk_id=58, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7935948371887207
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Hasil: chunk_id=68, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7870527740434642
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Hasil: chunk_id=52, dokumen=Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf, similarity=0.7857294550972866
2025-05-05 17:02:23,183 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 17:02:23,183 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 17:02:23,183 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 3, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika pengguna tidak bertanya tentang dokumen, jawab dengan pengetahuan umum anda.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pengelolaan Alat Pelindung Diri (APD) di Lingkungan Regional 4 (1).pdf (standard_safety)\n--------------------------------------\npenggunaan APD yang ditetapkan.  \n2. APD yang sudah tidak layak pakai (pecah, deformasi, aus, putus , rusak \nkarena pemakaian atau tidak dapat dipakai lagi) dapat digantikan dengan \nyang baru.  \n3. APD yang digunakan  tidak melebi hi batas waktu kadaluwarsa . \n4. Desain  Coverall  dan Helm Keselamatan mengacu pada SK Direktur \nUtama Pertamina (Persero) No. Kpts -65/C00000/2012 tanggal 10 \nDesember 2012.  \n5. Pelaksanaan pelatihan APD meliputi:  \na. Pelatihan, penyuluhan, induction , briefing  dengan meng undang para \npekerja . \nb. Informasi mengenai jenis, penggunaan, standar, pemakaian, \nperawatan dan inspeksi mengenai  APD. \nc. Feedback  baik berupa saran, hasil tes, maupun form terkait hasil \nkegiatan, misal persetujuan form safety  induction  dari tenaga kerja.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\nTATA KERJA ORGANISAS I  \nFUNGSI  : HSSE  NOMOR  : B8-021/PPC04100 /2022 -S9\ndengan mengacu pada  Lampiran 4  dan pemeriksaan jumlah APD \ndengan mengacu pada  Lampiran 6 . \n4. Officer Safety  mengembalikan APD yang sudah diperiksa kepada \nUser  dilengkapi dengan keterangan sesuai/tidak sesuai dengan \nmenggunakan Formulir Berita Acara Pemeriksaan APD Nomor F-\n004/B8 -021/PPC04100/2022 -S9 pada Lampiran  10. \n5. User  mengembalikan APD kepada Kontraktor.  \n6. Kontraktor menerima APD dan menindaklanjuti ( APD yang sesuai \ndidistribusikan, yang tidak sesuai diganti).  \nE. Pemusnahan Alat Pelindung Diri  \n1. User  mengembalikan APD rusak/cacat produk/ kadaluwarsa  kepada \nOfficer Safety  dengan mengisi formulir F-005/B8 -\n021/PPC04100/2022 -S9 pada Lampiran  11. \n2. Officer Safety  melakukan pencatatan data APD rusak/ kadaluwarsa  \n3. Superintendent Fie ld HSSE  Ops mengumpulkan seluruh APD yang \nbekas/rusak/ kadaluwarsa  sebelum dimusnahkan.  \n4. Superintendent Field HSSE  Ops melakukan pemilahan  dan\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \nPERMINTAAN  ALAT PELINDUNG DIRI (APD)  Phase User  Superintendent Field \nHSSE Ops  SCM Support & Receiving  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n   \n \nMulai \n1. Mengajukan permintaan \nAPD \n2. Mengajukan proses \npengadaan APD \n3. Melakukan Pemeriksaan APD  \n4. Mendistribusikan APD  ke \nUser dan mencatat  \npermintaan APD ke daftar \nstok \n5. Menerima  APD \nSelesai  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:21:22Dokumen Tidak Terkendali\n   \n \n \n \nINSPEKSI  ALAT PELINDUNG DIRI (APD)  Phase User  Officer Safety  Superintendent Field \nHSSE Ops  Asst. Manager Safety \nZona  Komite HSSE/Loss \nPrevention Committee  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n     \n \nMulai \n1. Menyiapkan jadwal \ninspeksi APD  \n2. Mengkoordinasikan \npemeriksaan APD di \nwilayah kerjanya masing -\nJUDUL  : PENGELOLAAN ALAT PELINDUNG \nDIRI (APD)  DI LINGKUNGAN \nREGIONAL 4  REVISI KE  : \uf0520 \uf02a1 \uf02a2 \uf02a3 \uf02a4 \nBERLAKU TMT  : 30 November  2022  \nHAL : 2 dari 7 \n \n6. Apabil a stok tercukupi untuk kebutuhan APD ditambah dengan safety \nfactor  10%, maka dilakukan operasional pembagian dan evaluasi \npemakaian.  \n7. Apabila stok tidak tercukupi untuk keutuhan APD tertentu ditambah \ndengan  safety factor  10%, maka dilakukan proses pengadaan . \n8. Spesifikasi APD untuk tamu dan kontraktor mengacu pada Lampiran 4, \nkecuali desain dan warna. Desain dan warna disesuaikan dengan \nketentuan perusahaan kontraktor /mitra kerja masing -masing yang \nbermitra dengan PT Pertamina EP Cepu (Regional 4) . \n9. APD untuk mitra kerja sebelum didistribusikan kepada mitra \nkerja/kontraktor wajib dilakukan inspeksi oleh fungsi HSSE.  \n10. Perawata n APD dilakukan mengikuti ketentuan perawatan dari produsen \nAPD atau mengacu pada ketentuan Lampiran 4.\n\n\nDOKUMEN 2: 16000479373.ManagementAPD.pdf (standard_safety)\n--------------------------------------\nharus dibuang dan/atau dimusnahkan .\n2) APD yang habis masa pakainya/kadaluarsa serta mengandung bahan\nberbahaya, harus dimusnahkan sesuai dengan peraturan perundangan -\nundangan .\n3) Pemusnahan APD yang mengandung bahan berbahaya harus\ndilengkapi dengan berita acara pemusnahan .\n\uf0a1Kemampuan perlindungan yang kurang\nsempurna\n\u25aaTidak tepat\n\u25aaSalah cara penggunaan\n\u25aaKualitas APD\n\uf0a1Sering APD tidak dipakai karena kurang nyaman\n\uf0a1Mengganggu penampilan\n\uf0a1dll\nThank you!\n\n\n\nPERTANYAAN: informasi dan jawaban terkait alat pelindung diri (APD) berdasarkan dokumen yang tersedia\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 17:02:31,931 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'informasi dan jawaban terkait alat pelindung diri (APD) berdasarkan dokumen yang tersedia'
2025-05-05 17:02:31,931 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,936 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:31,946 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 30
2025-05-05 17:02:31,946 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 30
2025-05-05 17:02:31,946 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,952 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:31,954 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 5 dari kueri ID 30
2025-05-05 17:02:31,954 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,958 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:31,959 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 30
2025-05-05 17:02:31,959 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,965 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:31,966 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 30
2025-05-05 17:02:31,966 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,971 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:02:31,973 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 11 dari kueri ID 30
2025-05-05 17:02:31,973 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:02:31,977 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:37,944 - rag-chatbot - INFO - Menerima kueri chat: 'Berikan saya prosedur safety untuk bekerja di ketinggian, terutama pada monkey board'
2025-05-05 17:08:37,944 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 17:08:37,944 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 4, "endpoint": "embedString", "parameter": {"inputString": "Berikan saya prosedur safety untuk bekerja di ketinggian, terutama pada monkey board", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:08:37,968 - RemoteCallHandler - DEBUG - {"call_id": 4, "event": "Received RPC result", "json": {"callId": 4, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:08:37,968 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 17:08:37,968 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:37,974 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:37,974 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 17:08:37,980 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.8358251550301832
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Hasil: chunk_id=43, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.8186193216669978
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.7718020217536689
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Hasil: chunk_id=41, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.7672959843521137
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Hasil: chunk_id=38, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.7574271252838224
2025-05-05 17:08:37,980 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 17:08:37,980 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 17:08:37,980 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 4, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika pengguna tidak bertanya tentang dokumen, jawab dengan pengetahuan umum anda.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pekerjaan di Ketinggian (Monkey Board) pdf.pdf (standard_safety)\n--------------------------------------\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\nbalance  sebelum turun dari Monkey Board . \n10. Derrick Man mulai  turun  melalui  tangga yang tersedia  menuju  ke Floor dengan  \nmengkaitkan hook safety pengait  keanaktangga  setiap 2 langkah. Hal ini  \ndilakukan  terus  menerus  dengan  baik dan aman  sampai di floor.  \nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 3 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nInstruksi Kerja  \nA. Persiapan  \n1. Pre-job safety meeting.  \n2. Membaca dan mengerti program.  \n3. Yakinka n bahwa escape chair , full body hardness, fall arrestor maupun  counter \nbalance  terpasang dengan kondisi baik dan bekerja dengan baik.  \n4. Yakinkan manila rope terpasang dan kondisinya baik.  \n5. Derrick Man memakai full body hardness  yang dikaitkan dengan fall arrestor  \nataupun counter balance  sebelum naik ke Monkey Board . \nB. Pelaksanaan   \n1. Derrick Man mulai  naik melalui  tangga yang tersedia  menuju  ke Monkey Board  \ndengan  mengkaitkan Hook Safety  pengait  ke anak  tangga  setiap 2 langkah. \nHal ini  dilakukan  terus  menerus  dengan  baik dan aman  sampai di Monkey \nBoard . \n2. Setelah Derrick Man sampai di Monkey Board  sebelum  memulai  pekerjaan,\n(MONKEY BOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 2 dari 2  \n \n3. Tidak terjadi kecelakaan yang berakibat fatal terhadap keselamatan pekerja \n(zero accident ). \n4. Zero spill . \n \nV. LAMPIRAN  \nLampiran  1 \u2013 Pengertian  \nLampiran  2 \u2013 Referensi  \nLampiran  3 \u2013 Instruksi Kerja  \n \n \nDisiapkan oleh:  Disetujui oleh:  \nManager Organization & \nQuality Management  Manager DWI Engineering, \nP&E Regional  Manager DWI Operation \nRegional  \n      \n  \n \n \n \n \n \nUmbu Yudhi Wahono  Irbabul Lubab  Andy Mahyuni Harahap   \n \n \n \n \nTgl: 30 Oktober 2023  Tgl: 30 Oktober 2023  Tgl: 30 Oktober 2023   Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 1 \u2013 TKI No. C4-037/PPC21210/2023 -S9 \nPengertian  \n1. Derrick Man  adalah tugas utamanya yaitu bekerja diketinggian membantu driller \nmenyusun pipa -pipa bor pada monkey board yang berada diatas menara rig. Juga\n\n\n\nPERTANYAAN: Berikan saya prosedur safety untuk bekerja di ketinggian, terutama pada monkey board\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 17:08:44,770 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'Berikan saya prosedur safety untuk bekerja di ketinggian, terutama pada monkey board'
2025-05-05 17:08:44,770 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,774 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:44,785 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 31
2025-05-05 17:08:44,785 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 31
2025-05-05 17:08:44,785 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,790 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:44,792 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 31
2025-05-05 17:08:44,792 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,798 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:44,799 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 31
2025-05-05 17:08:44,800 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,804 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:44,806 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 31
2025-05-05 17:08:44,806 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,809 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:44,810 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 31
2025-05-05 17:08:44,810 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:44,814 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:55,803 - rag-chatbot - INFO - Permintaan download dokumen ID: 10
2025-05-05 17:08:55,803 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:08:55,809 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:08:55,810 - rag-chatbot - INFO - Mengirim file: Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, path: uploads/50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf
2025-05-05 17:10:37,626 - rag-chatbot - INFO - Permintaan download dokumen ID: 10
2025-05-05 17:10:37,626 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:10:37,631 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:10:37,632 - rag-chatbot - INFO - Mengirim file: Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, path: uploads/50e6e6bd-49e0-466a-a50c-1a11c7595b98.pdf
2025-05-05 17:18:51,577 - rag-chatbot - INFO - Menerima kueri chat: 'jelaskan standar osha bekerja di ketinggian'
2025-05-05 17:18:51,577 - rag-chatbot - INFO - Membuat embedding dari query
2025-05-05 17:18:51,578 - SyncLMStudioWebsocket - DEBUG - {"event": "Sending RPC request", "json": {"callId": 5, "endpoint": "embedString", "parameter": {"inputString": "jelaskan standar osha bekerja di ketinggian", "modelSpecifier": {"query": {"identifier": "nomic-embed-text-v1.5"}, "type": "query"}}, "type": "rpcCall"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:18:51,601 - RemoteCallHandler - DEBUG - {"call_id": 5, "event": "Received RPC result", "json": {"callId": 5, "result": {"...": "..."}, "type": "rpcResult"}, "ws_url": "ws://localhost:1234/embedding"}
2025-05-05 17:18:51,601 - rag-chatbot - INFO - Mencari chunks yang mirip dengan query. Category: None, Max chunks: 5
2025-05-05 17:18:51,601 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:51,607 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:51,607 - rag-chatbot - INFO - Pencarian tanpa filter kategori
2025-05-05 17:18:51,611 - rag-chatbot - INFO - Pencarian mengembalikan 5 hasil
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Hasil: chunk_id=32, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.6923515200614929
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Hasil: chunk_id=42, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.6635432243347168
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Hasil: chunk_id=41, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.6508817284773761
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Hasil: chunk_id=36, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.6478769006875917
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Hasil: chunk_id=37, dokumen=Pekerjaan di Ketinggian (Monkey Board) pdf.pdf, similarity=0.6438835859298706
2025-05-05 17:18:51,611 - rag-chatbot - DEBUG - Koneksi database ditutup
2025-05-05 17:18:51,611 - rag-chatbot - INFO - Mengirim prompt ke LLM
2025-05-05 17:18:51,611 - SyncLMStudioWebsocket - DEBUG - {"event": "Connecting channel endpoint", "json": {"channelId": 5, "creationParameter": {"history": {"messages": [{"content": [{"text": "Kamu adalah asisten AI Safety Assistant yang membantu menjawab pertanyaan berdasarkan dokumen yang diberikan. \nBerikan jawaban yang sangat sangat lengkap, akurat, dan bermanfaat persis seperti dokumen. Rujuk ke dokumen dengan menyebutkan nama file asli.\nJANGAN menyebutkan UUID atau ID internal dalam jawaban. Jika pengguna tidak bertanya tentang dokumen, jawab dengan pengetahuan umum anda.\n\nDOKUMEN YANG TERSEDIA:\n\nDOKUMEN 1: Pekerjaan di Ketinggian (Monkey Board) pdf.pdf (standard_safety)\n--------------------------------------\nTATA KERJA INDIVIDU  \n \nPEKERJAAN DI KETINGGIAN  \n(MONKEY BOARD ) \n \nNo: C4 -037/PPC21210/2023 -S9 \nREVISI KE - \uf0520 \u007f1 \u007f2 \u007f3 \u007f4 \n \n \n \nPT PERTAMINA EP CEPU  \n(REGIONAL 4 ) \n \nDRILLING AND WELL INTERVENTION\nInternal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : i dari iii  \n \nLEMBAR PERSETUJUAN TKI  \nPROSES PERSETUJUAN DOKUMEN STK DARI PEJABAT TERKAIT  \nNO. STK  :  C4-037/PPC21210/2023 -S9 \nPERIHAL  : PEKERJAAN DI KETINGGIAN ( MONKEY BOARD ) \n \nDokumen TKI terlampir telah dirancang, disusun, diperiksa, disepakati, dan \nditandatangani oleh para pejabat terkait yang bertanggung jawab  di bawah ini:  \n \nNo  \nNAMA  & JABATAN  PERAN  \n(Penyusun /  \nNarasumber)  DITERIMA  \nTANGGAL  DITERUS\nkaitkan  terlebih  dahulu Hook Safety  ke Pagar Monkey Board  dengan  baik dan \naman. Hal ini  untuk  mengantisipasi Derrick Man terjatuh  dari ketinggian.  \n3. Derrick Man mengkaitkan manila rope  pada pipa produksi/bor dan lanjut buka \nelevator.  \n4. Tarik pipa produksi/bor dengan manila rope  dan sandarkan pipa produksi/bor \ndi Monkey Board . \n5. Pasang rantai untuk stopper  pada sandaran pipa produksi/bor.  \n6. Lanjutkan pekerjaan diatas sesuai  dengan program kerja  dengan  baik dan \naman.  \n7. Setelah  selesai  pekerjaan  pada  saat Derrick Man akan  turun, yakinkan  \nperalalatan  dan kondisi di Monkey Board  dalam  keadaan  aman.  \n8. Buka Hook Safety  pengait  dan selanjutnya  kaitkan Hook Safety  pengait  ke \nanak  tangga  sebelum Derrick M an turun.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \n9. Derrick Man mengkaitkan full body hardness  dengan fall arrestor  ataupun counter\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nLampiran 3 \u2013 TKI No.  C4-037/PPC21210/2023 -S9 \nInstruksi Kerja  \nA. Persiapan  \n1. Pre-job safety meeting.  \n2. Membaca dan mengerti program.  \n3. Yakinka n bahwa escape chair , full body hardness, fall arrestor maupun  counter \nbalance  terpasang dengan kondisi baik dan bekerja dengan baik.  \n4. Yakinkan manila rope terpasang dan kondisinya baik.  \n5. Derrick Man memakai full body hardness  yang dikaitkan dengan fall arrestor  \nataupun counter balance  sebelum naik ke Monkey Board . \nB. Pelaksanaan   \n1. Derrick Man mulai  naik melalui  tangga yang tersedia  menuju  ke Monkey Board  \ndengan  mengkaitkan Hook Safety  pengait  ke anak  tangga  setiap 2 langkah. \nHal ini  dilakukan  terus  menerus  dengan  baik dan aman  sampai di Monkey \nBoard . \n2. Setelah Derrick Man sampai di Monkey Board  sebelum  memulai  pekerjaan,\nInitial *)  Paraf  Initial **)  Paraf  \n         \n         \n         \n         \n         \nNote : * ) Initial dan Paraf Fungsi Penanggung Jawab STK  \n**) Initial dan Paraf Fungsi Pengendali STK  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN ( MONKEY \nBOARD ) REVISI KE  : \uf052 0 \n1 \n2 \n3 \n4 \nBERLAKU TMT  : 1 Oktober 2023  \nHAL : 1 dari 2  \n \n \n \nI. TUJUAN  \nSebagai acuan untuk melaksanakan proses Pekerjaan di Ketinggian ( Monkey \nBoard ). \n \nII. METODE/TEKNIK/ALAT  \nMetode  : - \nTeknik  : - \nAlat :  \nBekerja ditempat ketinggian  (Monkey Board ) harus memakai peralatan safety \npendukung  terpasang dengan baik dan aman. Adapun alat peralatan yang \ndipergunakan dalam bekerja di ketinggian ( Monkey Board ) yaitu :\n1. Perlengkapan safety  seperti coverall , safety shoes , sarung tangan, \nkacamata, helmet  dengan chain strap.  \n2. Self Contained  Breathing Apparatus  (SCBA) untuk sumur dengan hazard  \nH2S. \n3. Full body hardness.  \n4. Fall arrestor.  \n5. Counter balance.  \n6. Escape chair.  \n \nIII. KUALIFIKASI PELAKSANA  \nMemiliki Sertifikat sebagai berikut:  \nDerrickman  Operator Menara Perawatan Sumur (OMPS)  \n \nIV. INDIKATOR & UKURAN KEBERHASILAN  \nUkuran keberhasilan dari TKI ini adalah :  \n1. Kegiatan pekerjaan di ketinggian dapat terlaksana dengan baik dan aman \nserta sesuai dengan yang telah diprogramkan . \n2. Pekerjaan di ketinggian dilakukan sesuai dengan Tata Kerja Individu ini. \n2. Pekerjaan selesai tepat waktu.  Internal Use Only\nDicetak Oleh Tommy Setianto (Nopek 19013414) Pada Tanggal 2 May 2025 Jam 15:46:27Dokumen Tidak Terkendali\n \nTATA KERJA INDIVIDU   \nFUNGSI  : DRILLING AND WELL INTERVENTION  NOMOR  : C4-037/PPC21210/2023 -S9 \nJUDUL  : PEKERJAAN DI KETINGGIAN\n\n\n\nPERTANYAAN: jelaskan standar osha bekerja di ketinggian\n\nJAWABAN:", "type": "text"}], "role": "user"}]}, "modelSpecifier": {"query": {"identifier": "qwen2.5-7b-instruct-1m"}, "type": "query"}, "predictionConfigStack": {"layers": [{"config": {"fields": []}, "layerName": "apiOverride"}]}}, "endpoint": "predict", "type": "channelCreate"}, "ws_url": "ws://localhost:1234/llm"}
2025-05-05 17:18:57,548 - rag-chatbot - INFO - Menyimpan riwayat kueri (tanpa embedding): 'jelaskan standar osha bekerja di ketinggian'
2025-05-05 17:18:57,548 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,554 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:57,565 - rag-chatbot - INFO - Riwayat kueri disimpan dengan ID: 32
2025-05-05 17:18:57,565 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 32
2025-05-05 17:18:57,565 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,570 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:57,573 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 32
2025-05-05 17:18:57,573 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,578 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:57,579 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 32
2025-05-05 17:18:57,579 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,584 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:57,586 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 32
2025-05-05 17:18:57,586 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,589 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
2025-05-05 17:18:57,590 - rag-chatbot - DEBUG - Mencatat akses dokumen ID 10 dari kueri ID 32
2025-05-05 17:18:57,590 - rag-chatbot - DEBUG - Mencoba membuat koneksi psycopg2...
2025-05-05 17:18:57,595 - rag-chatbot - DEBUG - Koneksi psycopg2 berhasil dibuat.
